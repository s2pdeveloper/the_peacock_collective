"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[661],{4495:(T,A,l)=>{l.d(A,{s:()=>y});var h=l(9862),t=l(3997),g=l(7398),C=l(8645),x=l(4552);class b extends C.x{constructor(c=1/0,o=1/0,i=x.l){super(),this._bufferSize=c,this._windowTime=o,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=o===1/0,this._bufferSize=Math.max(1,c),this._windowTime=Math.max(1,o)}next(c){const{isStopped:o,_buffer:i,_infiniteTimeWindow:u,_timestampProvider:s,_windowTime:d}=this;o||(i.push(c),!u&&i.push(s.now()+d)),this._trimBuffer(),super.next(c)}_subscribe(c){this._throwIfClosed(),this._trimBuffer();const o=this._innerSubscribe(c),{_infiniteTimeWindow:i,_buffer:u}=this,s=u.slice();for(let d=0;d<s.length&&!c.closed;d+=i?1:2)c.next(s[d]);return this._checkFinalizedStatuses(c),o}_trimBuffer(){const{_bufferSize:c,_timestampProvider:o,_buffer:i,_infiniteTimeWindow:u}=this,s=(u?1:2)*c;if(c<1/0&&s<i.length&&i.splice(0,i.length-s),!u){const d=o.now();let e=0;for(let n=1;n<i.length&&i[n]<=d;n+=2)e=n;e&&i.splice(0,e+1)}}}var m=l(3020);function _(p,c,o){let i,u=!1;return p&&"object"==typeof p?({bufferSize:i=1/0,windowTime:c=1/0,refCount:u=!1,scheduler:o}=p):i=p??1/0,(0,m.B)({connector:()=>new b(i,c,o),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}var v=l(5879);let y=(()=>{class p{constructor(o){this.httpClient=o,this.options={headers:(new h.WM).set("Content-Type","application/json")}}private(){return`${location.protocol}//${location.hostname+(location.port?":"+location.port:"")}/`}get(o,i=new h.LE){return(0,t.x)(),this.httpClient.get(o,{params:i}).pipe((0,g.U)(u=>u.result),_())}put(o,i={}){return(0,t.x)(),this.httpClient.put(o,i).pipe((0,g.U)(u=>u.result))}post(o,i={}){return(0,t.x)(),this.httpClient.post(o,i).pipe((0,g.U)(u=>u.result))}delete(o){return(0,t.x)(),this.httpClient.delete(o).pipe((0,g.U)(i=>i.result),_())}getFile(o,i=new h.LE){return this.httpClient.get(o,{responseType:"blob",headers:(new h.WM).append("Content-Type","application/json")})}getIp(){return(0,t.x)(),this.httpClient.get("https://ipapi.co/json/").pipe(_())}static#t=this.\u0275fac=function(i){return new(i||p)(v.LFG(h.eN))};static#e=this.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},1290:(T,A,l)=>{l.r(A),l.d(A,{AllProductVariantsModule:()=>u});var h=l(6814),t=l(5879),g=l(1076),C=l(6411),x=l(485),b=l(8672),m=l(95);function _(s,d){if(1&s&&(t.ynx(0),t._uU(1),t._UZ(2,"i",36),t.BQk()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name)+" | "," "),t.xp6(1),t.Udp("color",e.value)}}function v(s,d){if(1&s&&(t.ynx(0),t._uU(1),t.BQk()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name)+" | "+e.value," ")}}function y(s,d){if(1&s&&(t.TgZ(0,"p"),t.YNc(1,_,3,3,"ng-container",35),t.YNc(2,v,2,1,"ng-container",35),t.qZA()),2&s){const e=d.$implicit;t.xp6(1),t.Q6J("ngIf","color"==(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name)),t.xp6(1),t.Q6J("ngIf","color"!=(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name))}}const p=function(){return{standalone:!0}};function c(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.qZA(),t.TgZ(3,"td",24),t.YNc(4,y,3,2,"p",23),t.qZA(),t.TgZ(5,"td",25),t._uU(6),t.qZA(),t.TgZ(7,"td",25),t._uU(8),t.qZA(),t.TgZ(9,"td",24)(10,"div",26)(11,"button",27),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return a.addQty=a.addQty-1,t.KtG(a.edit=!0)}),t._UZ(12,"i",28),t.qZA(),t.TgZ(13,"input",29),t.NdJ("ngModelChange",function(r){const f=t.CHM(e).$implicit;return t.KtG(f.addQty=r)})("change",function(){const a=t.CHM(e).$implicit;return t.KtG(a.edit=!0)}),t.qZA(),t.TgZ(14,"button",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return a.addQty=a.addQty+1,t.KtG(a.edit=!0)}),t._UZ(15,"i",31),t.qZA()()(),t.TgZ(16,"td",32)(17,"div",33)(18,"input",29),t.NdJ("ngModelChange",function(r){const f=t.CHM(e).$implicit;return t.KtG(f.price=r)})("change",function(){const a=t.CHM(e).$implicit;return t.KtG(a.edit=!0)}),t.qZA()()(),t.TgZ(19,"td",32)(20,"button",34),t.NdJ("click",function(){const a=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.update(a))}),t._UZ(21,"i",13),t.qZA()()()}if(2&s){const e=d.$implicit,n=d.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Q6J("ngForOf",e.variantWithAttrVariantMap),t.xp6(2),t.Oqu(null==e?null:e.sku),t.xp6(2),t.Oqu(null==e?null:e.qty),t.xp6(3),t.Q6J("disabled",e.addQty<=0),t.xp6(2),t.Q6J("ngModel",e.addQty)("ngModelOptions",t.DdM(9,p)),t.xp6(5),t.Q6J("ngModel",e.price)("ngModelOptions",t.DdM(10,p))}}const i=[{path:"",pathMatch:"full",redirectTo:"all"},{path:"all",component:(()=>{class s{constructor(e,n,r,a){this.router=e,this.variantService=n,this.toastService=r,this.spinner=a,this.variants=[],this.page=1,this.pageSize=25,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.addQty=0}ngOnInit(){this.getAllProductVariant()}navigateTo(e,n){n?this.router.navigate([e],{queryParams:{id:n}}):this.router.navigate([e])}update(e){let n={price:e.price,qty:e.qty};this.spinner.show(),this.variantService.update(e.id,n).subscribe(r=>{this.spinner.hide(),this.toastService.success(r.message)})}updateAll(){let e=!1,n=this.variants.filter(r=>r?.edit).map(r=>(isNaN(r.addQty)&&(e=!0),{id:r.id,price:r.price,qty:isNaN(r.addQty)?r.qty:r.qty+r.addQty}));e?this.toastService.warning("Qty is Not a Number"):(this.spinner.show(),this.variantService.updateAll(n).subscribe(r=>{this.spinner.hide(),this.getAllProductVariant(),this.toastService.success(r.message)}))}getAllProductVariant(){this.spinner.show(),this.variantService.getAllProductVariant({page:this.page,pageSize:this.pageSize,search:this.search}).subscribe(n=>{this.spinner.hide(),this.variants=n?.rows})}searchFn(){(this.search.toString().length>=3||0==this.search.toString().length)&&this.getAllProductVariant()}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(g.F0),t.Y36(C.H),t.Y36(x.k),t.Y36(b.t2))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-all-product-variants"]],decls:39,vars:2,consts:[[1,"table-container"],[1,"card","table-card"],[1,"card-title"],[1,"card-header"],[1,"row","justify-content-between"],[1,"col-4"],[1,"input-icons"],[1,"input-group","input-group-sm"],["type","search","aria-label","Small","placeholder","Search","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"input-group-append"],["id","inputGroup-sizing-sm",1,"input-group-text","h-100"],[1,"ti","ti-search"],["ngbTooltip","Edit",1,"btn","btn-primary","btn-sm","action-btn","mx-2",3,"click"],[1,"ti","ti-edit-circle"],[1,"card-body","p-3"],[1,"table-responsive"],[1,"table","table-hover","table-bordered"],[1,"thead"],[1,"table-secondary"],["scope","col"],["scope","col",1,"text-start"],["scope","col",1,"mx-auto","text-center"],[1,"tbody","mt-3"],[4,"ngFor","ngForOf"],["scope","row"],["scope","row",1,"text-start"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","btn-sm","btn-outline-none","py-0","border-0",3,"disabled","click"],["aria-hidden","true",1,"fa-solid","fs-3","fa-minus-square","text-primary","fa-5x","mx-0"],["type","number",1,"form-control","w-25",3,"ngModel","ngModelOptions","ngModelChange","change"],[1,"btn","btn-sm","btn-outline-none","py-0","border-0",3,"click"],["aria-hidden","true",1,"fa-solid","fs-3","fa-plus-square","text-primary","fa-5x","mx-0"],["scope","row",1,"text-center"],[1,"d-flex","justify-content-center"],["ngbTooltip","Edit",1,"btn","btn-sm","action-btn","mx-2",3,"click"],[4,"ngIf"],[1,"fa-solid","fa-square"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4,"All Variants List"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"input",8),t.NdJ("ngModelChange",function(f){return r.search=f})("input",function(){return r.searchFn()}),t.qZA(),t.TgZ(11,"div",9)(12,"span",10),t._UZ(13,"i",11),t.qZA()()()()(),t.TgZ(14,"div",5)(15,"button",12),t.NdJ("click",function(){return r.updateAll()}),t._UZ(16,"i",13),t._uU(17," Update "),t.qZA()()()(),t.TgZ(18,"div",14)(19,"div",15)(20,"table",16)(21,"thead",17)(22,"tr",18)(23,"th",19),t._uU(24,"Sr. No."),t.qZA(),t.TgZ(25,"th",20),t._uU(26,"Attribute"),t.qZA(),t.TgZ(27,"th",20),t._uU(28,"SKU"),t.qZA(),t.TgZ(29,"th",20),t._uU(30,"QTY"),t.qZA(),t.TgZ(31,"th",19),t._uU(32,"Add QTY"),t.qZA(),t.TgZ(33,"th",19),t._uU(34,"Price"),t.qZA(),t.TgZ(35,"th",21),t._uU(36,"Action"),t.qZA()()(),t.TgZ(37,"tbody",22),t.YNc(38,c,22,11,"tr",23),t.qZA()()()()()()),2&n&&(t.xp6(10),t.Q6J("ngModel",r.search),t.xp6(28),t.Q6J("ngForOf",r.variants))},dependencies:[h.sg,h.O5,m.Fj,m.wV,m.JJ,m.On]})}return s})()}];let u=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[h.ez,g.Bz.forChild(i),m.UX,m.u5]})}return s})()}}]);