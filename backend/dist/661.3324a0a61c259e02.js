"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[661],{4495:(Z,A,l)=>{l.d(A,{s:()=>x});var m=l(9862),t=l(3997),f=l(7398),y=l(8645),b=l(4552);class T extends y.x{constructor(c=1/0,a=1/0,i=b.l){super(),this._bufferSize=c,this._windowTime=a,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=a===1/0,this._bufferSize=Math.max(1,c),this._windowTime=Math.max(1,a)}next(c){const{isStopped:a,_buffer:i,_infiniteTimeWindow:p,_timestampProvider:_,_windowTime:r}=this;a||(i.push(c),!p&&i.push(_.now()+r)),this._trimBuffer(),super.next(c)}_subscribe(c){this._throwIfClosed(),this._trimBuffer();const a=this._innerSubscribe(c),{_infiniteTimeWindow:i,_buffer:p}=this,_=p.slice();for(let r=0;r<_.length&&!c.closed;r+=i?1:2)c.next(_[r]);return this._checkFinalizedStatuses(c),a}_trimBuffer(){const{_bufferSize:c,_timestampProvider:a,_buffer:i,_infiniteTimeWindow:p}=this,_=(p?1:2)*c;if(c<1/0&&_<i.length&&i.splice(0,i.length-_),!p){const r=a.now();let g=0;for(let e=1;e<i.length&&i[e]<=r;e+=2)g=e;g&&i.splice(0,g+1)}}}var C=l(3020);function h(u,c,a){let i,p=!1;return u&&"object"==typeof u?({bufferSize:i=1/0,windowTime:c=1/0,refCount:p=!1,scheduler:a}=u):i=u??1/0,(0,C.B)({connector:()=>new T(i,c,a),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:p})}var v=l(5879);let x=(()=>{class u{constructor(a){this.httpClient=a,this.options={headers:(new m.WM).set("Content-Type","application/json")}}private(){return`${location.protocol}//${location.hostname+(location.port?":"+location.port:"")}/`}get(a,i=new m.LE){return(0,t.x)(),this.httpClient.get(a,{params:i}).pipe((0,f.U)(p=>p.result),h())}put(a,i={}){return(0,t.x)(),this.httpClient.put(a,i).pipe((0,f.U)(p=>p.result))}post(a,i={}){return(0,t.x)(),this.httpClient.post(a,i).pipe((0,f.U)(p=>p.result))}delete(a){return(0,t.x)(),this.httpClient.delete(a).pipe((0,f.U)(i=>i.result),h())}getFile(a,i=new m.LE){return this.httpClient.get(a,{responseType:"blob",headers:(new m.WM).append("Content-Type","application/json")})}getIp(){return(0,t.x)(),this.httpClient.get("https://ipapi.co/json/").pipe(h())}static#t=this.\u0275fac=function(i){return new(i||u)(v.LFG(m.eN))};static#e=this.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},1290:(Z,A,l)=>{l.r(A),l.d(A,{AllProductVariantsModule:()=>_});var m=l(6814),t=l(5879),f=l(1076),y=l(6411),b=l(485),T=l(8672),C=l(7741),h=l(95);function v(r,g){if(1&r&&(t.ynx(0),t._uU(1),t._UZ(2,"i",40),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name)+" | "," "),t.xp6(1),t.Udp("color",e.value)}}function x(r,g){if(1&r&&(t.ynx(0),t._uU(1),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name)+" | "+e.value," ")}}function u(r,g){if(1&r&&(t.TgZ(0,"p"),t.YNc(1,v,3,3,"ng-container",39),t.YNc(2,x,2,1,"ng-container",39),t.qZA()),2&r){const e=g.$implicit;t.xp6(1),t.Q6J("ngIf","color"==(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name)),t.xp6(1),t.Q6J("ngIf","color"!=(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name))}}const c=function(){return{standalone:!0}};function a(r,g){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",27),t._uU(2),t.qZA(),t.TgZ(3,"td",27),t.YNc(4,u,3,2,"p",25),t.qZA(),t.TgZ(5,"td",28),t._uU(6),t.qZA(),t.TgZ(7,"td",29),t._uU(8),t.qZA(),t.TgZ(9,"td",27)(10,"div",30)(11,"button",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return s.addQty=s.addQty-1,t.KtG(s.edit=!0)}),t._UZ(12,"i",32),t.qZA(),t.TgZ(13,"input",33),t.NdJ("ngModelChange",function(n){const d=t.CHM(e).$implicit;return t.KtG(d.addQty=n)})("change",function(){const s=t.CHM(e).$implicit;return t.KtG(s.edit=!0)}),t.qZA(),t.TgZ(14,"button",34),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return s.addQty=s.addQty+1,t.KtG(s.edit=!0)}),t._UZ(15,"i",35),t.qZA()()(),t.TgZ(16,"td",36)(17,"div",37)(18,"input",33),t.NdJ("ngModelChange",function(n){const d=t.CHM(e).$implicit;return t.KtG(d.price=n)})("change",function(){const s=t.CHM(e).$implicit;return t.KtG(s.edit=!0)}),t.qZA()()(),t.TgZ(19,"td",36)(20,"button",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.update(s))}),t._UZ(21,"i",14),t.qZA()()()}if(2&r){const e=g.$implicit,o=g.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Q6J("ngForOf",e.variantWithAttrVariantMap),t.xp6(2),t.Oqu(null==e?null:e.sku),t.xp6(2),t.Oqu(null==e?null:e.qty),t.xp6(3),t.Q6J("disabled",e.addQty<=0),t.xp6(2),t.Q6J("ngModel",e.addQty)("ngModelOptions",t.DdM(9,c)),t.xp6(5),t.Q6J("ngModel",e.price)("ngModelOptions",t.DdM(10,c))}}const p=[{path:"",pathMatch:"full",redirectTo:"all"},{path:"all",component:(()=>{class r{constructor(e,o,n,s){this.router=e,this.variantService=o,this.toastService=n,this.spinner=s,this.variants=[],this.page=1,this.pageSize=25,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.addQty=0}ngOnInit(){this.getAllProductVariant()}navigateTo(e,o){o?this.router.navigate([e],{queryParams:{id:o}}):this.router.navigate([e])}update(e){console.log("data",e);let o={price:e.price,qty:e.qty+e.addQty};console.log("payload",o),this.spinner.show(),this.variantService.update(e.id,o).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.getAllProductVariant()})}updateAll(){let e=!1,o=this.variants.filter(n=>n?.edit).map(n=>(isNaN(n.addQty)&&(e=!0),{id:n.id,price:n.price,qty:isNaN(n.addQty)?n.qty:n.qty+n.addQty}));e?this.toastService.warning("Qty is Not a Number"):(this.spinner.show(),this.variantService.updateAll(o).subscribe(n=>{this.spinner.hide(),this.getAllProductVariant(),this.toastService.success(n.message)}))}getAllProductVariant(){this.spinner.show(),this.variantService.getAllProductVariant({page:this.page,pageSize:this.pageSize,search:this.search}).subscribe(o=>{this.spinner.hide(),this.variants=o?.rows,this.collection=o?.count})}onChangePage(e){e>0&&(this.page=e),this.getAllProductVariant()}searchFn(){(this.search.toString().length>=3||0==this.search.toString().length)&&this.getAllProductVariant()}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(f.F0),t.Y36(y.H),t.Y36(b.k),t.Y36(T.t2))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-all-product-variants"]],decls:40,vars:5,consts:[[1,"table-container"],[1,"card","table-card"],[1,"card-title"],[1,"card-header"],[1,"row","justify-content-between"],[1,"col-4"],[1,"input-icons"],[1,"input-group","input-group-sm"],["type","search","aria-label","Small","placeholder","Search","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"input-group-append"],["id","inputGroup-sizing-sm",1,"input-group-text","h-100"],[1,"ti","ti-search"],[1,"d-flex","col-auto","justify-content-end"],["ngbTooltip","Edit",1,"btn","btn-primary","action-btn","mx-3",3,"click"],[1,"ti","ti-edit-circle"],[1,"card-body","p-3"],[1,"table-responsive"],[1,"table","table-hover","table-bordered"],[1,"thead"],[1,"table-secondary"],["scope","col"],["scope","col",1,"text-start"],["scope","col",1,"text-end"],["scope","col",1,"mx-auto","text-center"],[1,"tbody","mt-3"],[4,"ngFor","ngForOf"],[3,"page","pageSize","collection","pageChange","pageSizeChange","collectionChange","myOutput"],["scope","row"],["scope","row",1,"text-start"],["scope","row",1,"text-end"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","btn-sm","btn-outline-none","py-0","border-0",3,"disabled","click"],["aria-hidden","true",1,"fa-solid","fs-3","fa-minus-square","text-primary","fa-5x","mx-0"],["type","number",1,"form-control","w-25",3,"ngModel","ngModelOptions","ngModelChange","change"],[1,"btn","btn-sm","btn-outline-none","py-0","border-0",3,"click"],["aria-hidden","true",1,"fa-solid","fs-3","fa-plus-square","text-primary","fa-5x","mx-0"],["scope","row",1,"text-center"],[1,"d-flex","justify-content-center"],["ngbTooltip","Edit",1,"btn","btn-sm","action-btn","mx-2",3,"click"],[4,"ngIf"],[1,"fa-solid","fa-square"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4,"All Variants List"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"input",8),t.NdJ("ngModelChange",function(d){return n.search=d})("input",function(){return n.searchFn()}),t.qZA(),t.TgZ(11,"div",9)(12,"span",10),t._UZ(13,"i",11),t.qZA()()()()(),t.TgZ(14,"div",12)(15,"button",13),t.NdJ("click",function(){return n.updateAll()}),t._UZ(16,"i",14),t._uU(17," Update "),t.qZA()()()(),t.TgZ(18,"div",15)(19,"div",16)(20,"table",17)(21,"thead",18)(22,"tr",19)(23,"th",20),t._uU(24,"Sr. No."),t.qZA(),t.TgZ(25,"th",21),t._uU(26,"Attribute"),t.qZA(),t.TgZ(27,"th",21),t._uU(28,"SKU"),t.qZA(),t.TgZ(29,"th",22),t._uU(30,"QTY"),t.qZA(),t.TgZ(31,"th",20),t._uU(32,"Add QTY"),t.qZA(),t.TgZ(33,"th",20),t._uU(34,"Price"),t.qZA(),t.TgZ(35,"th",23),t._uU(36,"Action"),t.qZA()()(),t.TgZ(37,"tbody",24),t.YNc(38,a,22,11,"tr",25),t.qZA()()(),t.TgZ(39,"app-custom-pagination",26),t.NdJ("pageChange",function(d){return n.page=d})("pageSizeChange",function(d){return n.pageSize=d})("collectionChange",function(d){return n.collection=d})("myOutput",function(){return n.onChangePage(n.page)}),t.qZA()()()()),2&o&&(t.xp6(10),t.Q6J("ngModel",n.search),t.xp6(28),t.Q6J("ngForOf",n.variants),t.xp6(1),t.Q6J("page",n.page)("pageSize",n.pageSize)("collection",n.collection))},dependencies:[m.sg,m.O5,C.W,h.Fj,h.wV,h.JJ,h.On]})}return r})()}];let _=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#n=this.\u0275inj=t.cJS({imports:[m.ez,C.W,f.Bz.forChild(p),h.UX,h.u5]})}return r})()}}]);