(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[564],{4495:(k,S,d)=>{"use strict";d.d(S,{s:()=>p});var g=d(9862),s=d(3997),T=d(7398),t=d(8645),_=d(4552);class C extends t.x{constructor(m=1/0,a=1/0,c=_.l){super(),this._bufferSize=m,this._windowTime=a,this._timestampProvider=c,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=a===1/0,this._bufferSize=Math.max(1,m),this._windowTime=Math.max(1,a)}next(m){const{isStopped:a,_buffer:c,_infiniteTimeWindow:h,_timestampProvider:Z,_windowTime:b}=this;a||(c.push(m),!h&&c.push(Z.now()+b)),this._trimBuffer(),super.next(m)}_subscribe(m){this._throwIfClosed(),this._trimBuffer();const a=this._innerSubscribe(m),{_infiniteTimeWindow:c,_buffer:h}=this,Z=h.slice();for(let b=0;b<Z.length&&!m.closed;b+=c?1:2)m.next(Z[b]);return this._checkFinalizedStatuses(m),a}_trimBuffer(){const{_bufferSize:m,_timestampProvider:a,_buffer:c,_infiniteTimeWindow:h}=this,Z=(h?1:2)*m;if(m<1/0&&Z<c.length&&c.splice(0,c.length-Z),!h){const b=a.now();let I=0;for(let A=1;A<c.length&&c[A]<=b;A+=2)I=A;I&&c.splice(0,I+1)}}}var f=d(3020);function w(l,m,a){let c,h=!1;return l&&"object"==typeof l?({bufferSize:c=1/0,windowTime:m=1/0,refCount:h=!1,scheduler:a}=l):c=l??1/0,(0,f.B)({connector:()=>new C(c,m,a),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}var x=d(5879);let p=(()=>{class l{constructor(a){this.httpClient=a,this.options={headers:(new g.WM).set("Content-Type","application/json")}}private(){return`${location.protocol}//${location.hostname+(location.port?":"+location.port:"")}/`}get(a,c=new g.LE){return(0,s.x)(),this.httpClient.get(a,{params:c}).pipe((0,T.U)(h=>h.result),w())}put(a,c={}){return(0,s.x)(),this.httpClient.put(a,c).pipe((0,T.U)(h=>h.result))}post(a,c={}){return(0,s.x)(),this.httpClient.post(a,c).pipe((0,T.U)(h=>h.result))}delete(a){return(0,s.x)(),this.httpClient.delete(a).pipe((0,T.U)(c=>c.result),w())}getFile(a,c=new g.LE){return this.httpClient.get(a,{responseType:"blob",headers:(new g.WM).append("Content-Type","application/json")})}getIp(){return(0,s.x)(),this.httpClient.get("https://ipapi.co/json/").pipe(w())}static#t=this.\u0275fac=function(c){return new(c||l)(x.LFG(g.eN))};static#e=this.\u0275prov=x.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},7564:(k,S,d)=>{"use strict";d.r(S),d.d(S,{ProductModule:()=>rt});var g=d(6814),s=d(95),T=d(7741),t=d(5879),_=d(1076),C=d(7942),f=d(1440),w=d(3665),x=d(9366),p=d(4087),l=d(485),m=d(6593),a=d(6857),c=d(4807);function h(n,v){if(1&n&&(t.TgZ(0,"option",47),t._uU(1),t.qZA()),2&n){const e=v.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Z(n,v){if(1&n){const e=t.EpF();t.TgZ(0,"label",48)(1,"div",49),t.O4$(),t.TgZ(2,"svg",50),t._UZ(3,"path",51),t.qZA(),t.kcU(),t.TgZ(4,"p"),t._uU(5,"Drag and Drop"),t.qZA(),t.TgZ(6,"p"),t._uU(7,"or"),t.qZA(),t.TgZ(8,"span",52),t._uU(9,"Browse file"),t.qZA()(),t.TgZ(10,"input",53),t.NdJ("change",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.fileChosen(o,"bannerImage"))}),t.qZA()()}2&n&&(t.xp6(10),t.Q6J("multiple",!1))}function b(n,v){if(1&n){const e=t.EpF();t.TgZ(0,"div",54),t._UZ(1,"img",55),t.TgZ(2,"button",56),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteImg())}),t._UZ(3,"i",57),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.url,t.LSH)}}const I=function(){return{standalone:!0}};let A=(()=>{class n{constructor(e,i,o,r,u,U,N,st,at,lt){this.router=e,this.activatedRoute=i,this.productService=o,this.categoryService=r,this.attributeService=u,this.tagsService=U,this.spinner=N,this.toastService=st,this.domSanitizer=at,this.validationService=lt,this.page=1,this.pageSize=10,this.search="",this.categoryOptions=[],this.autoIncrementNos={},this.file=null,this.fileName="",this.url=null,this.submitted=!1,this.categoryArr=[],this.attributeArr=[],this.attributes=[],this.tags=[],this.productImage=null,this.productImageName="",this.productImageUrl=null,this.FORM_ERRORS=[{message:"Category is Required",key:"category"},{message:"Product Name is Required",key:"name"},{message:"Short Description is Required",key:"shortDescription"},{message:"Status is Required",key:"status"}],this.productForm=new s.cw({id:new s.NI(null),name:new s.NI(null,[s.kI.required]),categoryId:new s.NI(null,[s.kI.required]),description:new s.NI(null),hsn:new s.NI(null),gst:new s.NI(null),inStock:new s.NI(!1),isTrending:new s.NI(!1),cod:new s.NI(!1),inSale:new s.NI(!1),salePrice:new s.NI(null),returnableDays:new s.NI(null),soldIndividually:new s.NI(!1),bannerImage:new s.NI(null),tagId:new s.NI([]),status:new s.NI("active")})}get form(){return this.productForm.controls}ngOnInit(){this.getAllCategory(),this.getAllAttribute(),this.getAllTags(),this.activatedRoute.queryParams.subscribe(e=>{e.id&&(this.getById(e.id),this.productId=e.id)})}navigateTo(){this.router.navigate(["default/product/product-list"])}getAllCategory(){this.categoryService.getAll({category:!0}).subscribe(e=>{this.categoryArr=e.rows})}getAllTags(){this.tagsService.getAll({}).subscribe(e=>{this.tags=e})}getAllAttribute(){this.attributeService.getAll({}).subscribe(e=>{this.attributes=e.rows})}onSubmit(){if(this.submitted=!0,this.validationService.checkErrors(this.productForm,this.FORM_ERRORS))return;let e=new FormData;for(const i in this.productForm.value)"tagId"!=i?"bannerImage"!=i&&e.append(i,this.productForm.value[i]):e.append(i,JSON.stringify(this.productForm.value[i]));if(this.file&&e.append("image",this.file,this.file.name),this.attributeArr.length){let i=this.attributes.filter(o=>this.attributeArr.includes(o.id)).map(o=>({id:o.id,name:o.name}));e.append("attributeArr",JSON.stringify(i))}this.productForm.value.id?this.update(this.productForm.value.id,e):(e.delete("id"),this.create(e))}create(e){this.spinner.show(),this.productService.create(e).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.router.navigate(["default/product/product-list"])})}update(e,i){this.spinner.show(),this.productService.update(e,i).subscribe(o=>{this.spinner.hide(),this.toastService.success(o.message),this.router.navigate(["default/product/product-list"])})}deleteImg(){this.url=null}resetForm(){this.productForm.reset()}getById(e){this.spinner.show(),this.productService.getById(e).subscribe(i=>{console.log("success",i),i.bannerImage&&(this.url=i.bannerImage),i?.productWithProdAttributeMap&&i?.productWithProdAttributeMap.length&&(this.attributeArr=i?.productWithProdAttributeMap.map(o=>o.attributeId)),i?.productWithTagMap.length&&(i.tagId=i?.productWithTagMap.map(o=>o.tagId)),this.productForm.patchValue(i),this.spinner.hide()})}getProductCode(e){}fileChosen(e,i){if(console.log("event.target.files",e),e.target.files.length){if(e.target.files[0].size>2e6)return void this.toastService.warning("Unable to upload file of size more than 1MB");let o=e.target.files[0];const r=new FileReader;r.readAsDataURL(o),r.onload=()=>{let u=r.result;"bannerImage"==i?(this.file=o,this.fileName=o.name,this.url=this.domSanitizer.bypassSecurityTrustUrl(u)):(this.productImage=o,this.productImageName=o.name,this.productImageUrl=this.domSanitizer.bypassSecurityTrustUrl(u))},r.onerror=u=>{console.error(u)}}}onAttrChange(e){this.attributeArr=[],console.log("ev",e);for(const i of e)this.attributeArr.push(i.id);this.attributeArr=[...this.attributeArr],console.log("attr333333333333333333",this.attributeArr)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.F0),t.Y36(_.gz),t.Y36(C.M),t.Y36(f.H),t.Y36(w.c),t.Y36(x.i),t.Y36(p.V),t.Y36(l.k),t.Y36(m.H7),t.Y36(a.R))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-info-form"]],decls:103,vars:18,consts:[[1,"card","form-card"],[1,"card-header"],[1,"card-header-items"],[1,"back-btn","btn","btn-primary",3,"click"],[1,"ti","ti-arrow-left","me-1"],[1,"card-body","mt-3","justify-content-center"],[3,"formGroup"],[1,"row","px-2"],[1,"col-md-4","ps-0","mb-3"],[1,"form-label"],[1,"text-danger"],["formControlName","name","placeholder","Product Name","type","text",1,"form-control"],[1,"col-md-4","mb-3"],["formControlName","categoryId",1,"form-select",3,"change"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","hsn","placeholder","HSN","type","text",1,"form-control"],[1,"input-group"],["formControlName","gst","placeholder","GST","type","number",1,"form-control"],["id","basic-addon2",1,"input-group-text"],["formControlName","returnableDays","placeholder","Returnable Days","type","number",1,"form-control"],[1,"col-md-4","mb-2"],["formControlName","status",1,"form-control"],["selected","","disabled","","value",""],["value","active"],["value","inactive"],[1,"col-md-4","mb-2","ps-0"],["bindLabel","name","bindValue","id","placeholder","Select Attribute",3,"items","multiple","ngModel","ngModelOptions","ngModelChange","change"],["bindLabel","title","bindValue","id","formControlName","tagId","placeholder","Select Tags",3,"items","multiple"],[1,"form-check","col-md-2","mb-3"],["for","stock",1,"form-check-label"],["formControlName","inStock","type","checkbox","value","","id","stock",1,"form-check-input"],["for","trend",1,"form-check-label"],["formControlName","isTrending","type","checkbox","value","","id","trend",1,"form-check-input"],["for","cod",1,"form-check-label"],["formControlName","cod","type","checkbox","value","","id","cod",1,"form-check-input"],[1,"col-md-12","ps-0","mb-3"],["formControlName","description","placeholder","Description ","rows","3",1,"form-control"],["for","file","class","file-upload-label",4,"ngIf"],["class","image",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","px-5","btn-primary","mx-2","shadow","rounded","rounded-3","d-flex","align-items-center",3,"click"],[1,"fa-solid","fa-arrows-rotate","me-2"],["type","submit",1,"btn","px-5","btn-success","shadow","rounded","rounded-3","mx-2","d-flex","align-items-center",3,"click"],[1,"fa-solid","me-2"],[3,"value"],["for","file",1,"file-upload-label"],[1,"file-upload-design"],["viewBox","0 0 640 512","height","1em"],["d","M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"],[1,"browse-button"],["id","file","accept","image/*","type","file",3,"multiple","change"],[1,"image"],["alt","image",1,"w-100",3,"src"],[1,"btn","btn-outline-danger","cross-btn",3,"click"],[1,"fa-solid","fa-xmark"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),t._uU(4),t.qZA(),t.TgZ(5,"div")(6,"a",3),t.NdJ("click",function(){return o.navigateTo()}),t._UZ(7,"i",4),t._uU(8," Back"),t.qZA()()()(),t.TgZ(9,"div",5)(10,"form",6)(11,"div",7)(12,"div",8)(13,"label",9),t._uU(14," Product Name "),t.TgZ(15,"span",10),t._uU(16,"*"),t.qZA()(),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"div",12)(19,"label",9),t._uU(20," Categories "),t.TgZ(21,"span",10),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"select",13),t.NdJ("change",function(u){return o.getProductCode(u)}),t.TgZ(24,"option",14),t._uU(25,"Select Category"),t.qZA(),t.YNc(26,h,2,2,"option",15),t.qZA()(),t.TgZ(27,"div",12)(28,"label",9),t._uU(29," HSN "),t.TgZ(30,"span",10),t._uU(31,"*"),t.qZA()(),t._UZ(32,"input",16),t.qZA(),t.TgZ(33,"div",8)(34,"label",9),t._uU(35," GST "),t.qZA(),t.TgZ(36,"div",17),t._UZ(37,"input",18),t.TgZ(38,"span",19),t._uU(39,"%"),t.qZA()()(),t.TgZ(40,"div",12)(41,"label",9),t._uU(42," Returnable Days "),t.qZA(),t._UZ(43,"input",20),t.qZA(),t.TgZ(44,"div",21)(45,"label",9),t._uU(46," Status "),t.TgZ(47,"span",10),t._uU(48,"*"),t.qZA()(),t.TgZ(49,"select",22)(50,"option",23),t._uU(51,"Select Status"),t.qZA(),t.TgZ(52,"option",24),t._uU(53,"Active"),t.qZA(),t.TgZ(54,"option",25),t._uU(55,"InActive"),t.qZA()()(),t.TgZ(56,"div",26)(57,"label",9),t._uU(58," Attribute "),t.TgZ(59,"span",10),t._uU(60,"*"),t.qZA()(),t.TgZ(61,"ng-select",27),t.NdJ("ngModelChange",function(u){return o.attributeArr=u})("change",function(u){return o.onAttrChange(u)}),t.qZA()(),t.TgZ(62,"div",26)(63,"label",9),t._uU(64," Tags "),t.TgZ(65,"span",10),t._uU(66,"*"),t.qZA()(),t._UZ(67,"ng-select",28),t.qZA(),t.TgZ(68,"div",29)(69,"label",30),t._uU(70," In Stock "),t.qZA(),t._UZ(71,"input",31),t.qZA(),t.TgZ(72,"div",29)(73,"label",32),t._uU(74," Is Trending "),t.qZA(),t._UZ(75,"input",33),t.qZA(),t.TgZ(76,"div",29)(77,"label",34),t._uU(78," Cash on Delivery "),t.qZA(),t._UZ(79,"input",35),t.qZA(),t.TgZ(80,"div",36)(81,"label",9),t._uU(82," Description "),t.qZA(),t._UZ(83,"textarea",37),t.qZA(),t.TgZ(84,"div",8)(85,"div")(86,"label",9),t._uU(87," Banner Image "),t.TgZ(88,"span",10),t._uU(89,"*"),t.qZA()()(),t.TgZ(90,"div"),t.YNc(91,Z,11,1,"label",38),t.YNc(92,b,4,1,"div",39),t.qZA()()()(),t._UZ(93,"hr"),t.TgZ(94,"div",40)(95,"div",41)(96,"div",42)(97,"button",43),t.NdJ("click",function(){return o.resetForm()}),t._UZ(98,"i",44),t._uU(99," Reset "),t.qZA(),t.TgZ(100,"button",45),t.NdJ("click",function(){return o.onSubmit()}),t._UZ(101,"i",46),t._uU(102),t.qZA()()()()()()),2&i&&(t.xp6(4),t.hij("",o.form.id.value?"Update":"Create"," Product"),t.xp6(6),t.Q6J("formGroup",o.productForm),t.xp6(14),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",o.categoryArr),t.xp6(35),t.Q6J("items",o.attributes)("multiple",!0)("ngModel",o.attributeArr)("ngModelOptions",t.DdM(17,I)),t.xp6(6),t.Q6J("items",o.tags)("multiple",!0),t.xp6(24),t.Q6J("ngIf",!o.url),t.xp6(1),t.Q6J("ngIf",o.url),t.xp6(8),t.Tol(o.form.id.value?"btn-warning":"btn-success"),t.xp6(1),t.Tol(o.form.id.value?"fa-pen-to-square":"fa-plus"),t.xp6(1),t.hij(" ",o.form.id.value?"Update":"Save"," "))},dependencies:[g.sg,g.O5,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.Wl,s.EJ,s.JJ,s.JL,s.On,s.sg,s.u,c.w9],styles:[".cross-btn[_ngcontent-%COMP%]{width:25px;height:25px;padding:0;display:flex;justify-content:center;align-items:center;position:absolute;top:5%;right:5%}.new-img[_ngcontent-%COMP%]{height:200px;width:200px!important;object-fit:contain}"]})}return n})();var y=d(7285),B=d(217),P=d(9862),J=d(5449),R=d(6306),F=d(7398),L=d(8504),E=d(9483);let M=(()=>{class n{constructor(e,i){this.authService=e,this.httpClient=new P.eN(i),this.currentUser=this.authService.getUser()}checkFileSize(e){return e.size/1048576<5}checkFileType(e){return!!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel",".csv","text/csv"].includes(e.type)}uploadBulkProduct(e){const i={headers:new P.WM({Authorization:`Bearer ${this.currentUser.token}`,Accept:"application/json",enctype:"multipart/form-data"})};return this.httpClient.post(`${J.N.baseUrl}product/updateProductByFile`,e,i).pipe((0,R.K)(r=>this.formatErrors(r)),(0,F.U)(r=>r&&r.result?r.result:null))}formatErrors(e){return console.error("Error in API call:",e),(0,L._)("Something went wrong. Please try again later.")}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(E.e),t.LFG(P.jN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();var q=d(2425),D=d(8672);const Y=["fileDropRef"];function z(n,v){1&n&&t._UZ(0,"img",28)}function O(n,v){if(1&n&&(t.TgZ(0,"div",29)(1,"h5",30),t._uU(2),t.qZA(),t.TgZ(3,"small",31),t._uU(4),t._UZ(5,"i",32),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",null==e.files[0]?null:e.files[0].name," "),t.xp6(2),t.hij(" ",e.formatBytes(null==e.files[0]?null:e.files[0].size)," ")}}function j(n,v){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"i",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.removeUploadedFile())}),t.qZA(),t.YNc(2,z,1,0,"img",25),t.TgZ(3,"div",26),t.YNc(4,O,6,2,"div",27),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.filePath),t.xp6(2),t.Q6J("ngIf",null==e.files[0]?null:e.files[0].name)}}function G(n,v){if(1&n){const e=t.EpF();t.TgZ(0,"div",33),t.NdJ("fileDropped",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.onFileDropped(o))}),t.TgZ(1,"input",34,35),t.NdJ("change",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.fileBrowseHandler(o))}),t.qZA(),t._UZ(3,"i",36),t.TgZ(4,"h5"),t._uU(5,"Drag and drop file or click here"),t.qZA(),t.TgZ(6,"small",37),t._uU(7,'(Only *.csv files are accepted)"'),t.qZA()()}}function H(n,v){if(1&n&&(t.ynx(0),t.TgZ(1,"small",38),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.displayMessage)}}let Q=(()=>{class n{constructor(e,i,o,r,u,U){this.modalService=e,this.activeModal=i,this.router=o,this.uploadService=r,this.toastService=u,this.spinner=U,this.displayMessage=null,this.filePath="",this.fileUploaded=!1,this.uploadForm=new s.cw({uploadedFile:new s.NI(null)}),this.removeImageForm=new s.cw({path:new s.NI(null)}),this.formData=new FormData,this.files=[]}ngOnInit(){this.uploadForm.value?.uploadedFile&&(this.filePath=this.uploadForm.value?.uploadedFile,this.fileUploaded=!!this.uploadForm.value?.uploadedFile)}bulkUploadProduct(){this.displayMessage||(this.spinner.show(),this.uploadService.uploadBulkProduct(this.formData).subscribe({next:e=>{this.dismissModal(),this.spinner.hide()},error:e=>{this.toastService.error(e),this.spinner.hide()}}))}uploadFile(e){if(this.spinner.show(),this.displayMessage=null,this.uploadService.checkFileType(e)&&this.uploadService.checkFileSize(e))this.formData.append("key","excel"),this.formData.append("uploadFile",e),this.fileUploaded=!0,this.spinner.hide();else{if(!this.uploadService.checkFileType(e))return this.displayMessage="Please upload the file in .csv format",void this.spinner.hide();if(!this.uploadService.checkFileSize(e))return this.displayMessage="Please upload the file that is less then 5mb",void this.spinner.hide()}}removeUploadedFile(){this.formData.delete("file"),this.filePath=null,this.files=[],this.fileUploaded=!1}get form(){return this.uploadForm.controls}downloadTemplate(){(0,B.saveAs)("assets/documents/product-template.csv","product-template.csv")}onFileDropped(e){this.prepareFilesList(e)}fileBrowseHandler(e){this.prepareFilesList(e.target.files)}prepareFilesList(e){for(const i of e)i.progress=0,this.files.push(i),this.uploadFile(e[0]);this.fileDropEl.nativeElement.value=""}formatBytes(e,i=2){if(0===e)return"0 Bytes";const r=i<=0?0:i,U=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,U)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][U]}dismissModal(){this.modalService.dismissAll("dismiss with cross click")}closeModal(){this.activeModal.close("close with cancel button")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.FF),t.Y36(y.Kz),t.Y36(_.F0),t.Y36(M),t.Y36(q._W),t.Y36(D.t2))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-bulk-upload"]],viewQuery:function(i,o){if(1&i&&t.Gf(Y,5),2&i){let r;t.iGM(r=t.CRH())&&(o.fileDropEl=r.first)}},decls:32,vars:5,consts:[[1,"container","p-0","mt-3"],[1,"card-header","py-2","px-3","border-bottom"],[1,"row"],[1,"col-11"],[1,"text-uppercase","card-title","text-default"],[1,"col-1","d-flex","justify-content-end"],[1,"fa","fa-md","text-primary","fa-xmark","shadow","p-1","mb-2","bg-white","rounded",3,"click"],[1,"card-body","py-0"],[3,"formGroup"],[1,"form-row"],[1,"col","px-3"],[1,"mt-3"],["class","col mb-2 mx-3",4,"ngIf"],["class","dropzone container round","appDnd","",3,"fileDropped",4,"ngIf"],[1,"text-left"],[4,"ngIf"],[1,"px-3"],[1,"text-black-100","font-14"],["role","button",1,"btn-link","mx-1","mt-3","text-primary",3,"click"],[1,"fa","fa-download"],[1,"d-flex","justify-content-end","my-3","px-3"],[1,"btn","btn-outline-danger","text-capitalize","mx-2",3,"click"],["type","button",1,"btn","btn-success","btn-blue","text-capitalize",3,"disabled","click"],[1,"col","mb-2","mx-3"],[1,"delete-badge","fa","fa-trash","shadow-sm","ml-4",3,"click"],["class","img-rounded","src","assets/img/theme/placeholder_product.svg","height","100","width","100","alt","uploaded-file",4,"ngIf"],[1,"single-file"],["class","info",4,"ngIf"],["src","assets/img/theme/placeholder_product.svg","height","100","width","100","alt","uploaded-file",1,"img-rounded"],[1,"info"],[1,"name","mb-0"],[1,"size","mb-1"],["aria-hidden","true",1,"fa","fa-check-circle","text-success","pl-2"],["appDnd","",1,"dropzone","container","round",3,"fileDropped"],["type","file","id","fileDropRef","accept",".csv",3,"change"],["fileDropRef",""],[1,"fa","fa-upload","fa-2x","text-muted","pb-2"],[1,"text-muted","text-wrap"],[1,"error-message"]],template:function(i,o){1&i&&(t.ynx(0),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h4",4)(6,"b"),t._uU(7,"Upload Product In Excel File"),t.qZA()()(),t.TgZ(8,"div",5)(9,"i",6),t.NdJ("click",function(){return o.dismissModal()}),t.qZA()()()(),t.TgZ(10,"div",7)(11,"form",8)(12,"div",9)(13,"div",10)(14,"label",11),t._uU(15," Upload Product In Excel File "),t.qZA(),t.YNc(16,j,5,2,"div",12),t.YNc(17,G,8,0,"div",13),t.TgZ(18,"div",14),t.YNc(19,H,3,1,"ng-container",15),t.qZA()()(),t.TgZ(20,"div",16)(21,"span",17)(22,"a",18),t.NdJ("click",function(){return o.downloadTemplate()}),t.TgZ(23,"b"),t._UZ(24,"i",19),t._uU(25," Download"),t.qZA()(),t._uU(26,"the excel template here that needs to be uploaded. "),t.qZA()(),t.TgZ(27,"div",20)(28,"button",21),t.NdJ("click",function(){return o.closeModal()}),t._uU(29," cancel "),t.qZA(),t.TgZ(30,"button",22),t.NdJ("click",function(){return o.bulkUploadProduct()}),t._uU(31," Submit "),t.qZA()()()()(),t.BQk()),2&i&&(t.xp6(11),t.Q6J("formGroup",o.uploadForm),t.xp6(5),t.Q6J("ngIf",o.fileUploaded),t.xp6(1),t.Q6J("ngIf",!o.fileUploaded),t.xp6(2),t.Q6J("ngIf",null!=o.displayMessage),t.xp6(11),t.Q6J("disabled",o.uploadForm.invalid))},dependencies:[g.O5,s._Y,s.JL,s.sg]})}return n})();function W(n,v){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30)(2,"span",31),t._uU(3),t.ALo(4,"titlecase"),t.qZA()(),t.TgZ(5,"td",32),t._UZ(6,"img",33),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",32),t._uU(10),t.qZA(),t.TgZ(11,"td",34),t._uU(12),t.qZA(),t.TgZ(13,"td",32)(14,"span"),t._uU(15),t.ALo(16,"titlecase"),t.qZA()(),t.TgZ(17,"td",32)(18,"button",35),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.navigateTo("/default/product/product-form",r.id))}),t._UZ(19,"i",36),t.qZA(),t.TgZ(20,"button",37),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw(),U=t.MAs(46);return t.KtG(u.open(r,U))}),t._UZ(21,"i",38),t.qZA(),t.TgZ(22,"button",39),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.navigateTo("/default/variant/variant-form",r.id))}),t._UZ(23,"i",40),t.qZA()()()}if(2&n){const e=v.$implicit;t.xp6(2),t.Q6J("ngbTooltip",e.name),t.xp6(1),t.hij(" ",t.lcZ(4,10,e.name),""),t.xp6(3),t.s9C("src",e.bannerImage,t.LSH),t.xp6(2),t.Oqu(e.hsn),t.xp6(2),t.Oqu(e.gst),t.xp6(2),t.hij(" ",null==e||null==e.productWithCategory?null:e.productWithCategory.name," "),t.xp6(2),t.Gre("badge rounded-pill  text-bg-","active"==e.status?"success":"danger"," px-2"),t.xp6(1),t.hij(" ",t.lcZ(16,12,e.status),"")}}function K(n,v){if(1&n){const e=t.EpF();t.TgZ(0,"div",41)(1,"button",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss("Cross click"))}),t.qZA()(),t.TgZ(2,"div",43)(3,"h3",44),t._uU(4),t.ALo(5,"uppercase"),t.qZA(),t.TgZ(6,"h4",45),t._uU(7," Are you sure you want to Delete ? "),t.qZA()(),t.TgZ(8,"div",46)(9,"button",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteProduct(o.selectedRow.id))}),t._uU(10," YES "),t.qZA(),t.TgZ(11,"button",48),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss("Cross click"))}),t._uU(12," NO "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(4),t.AsE(" ",e.selectedRow.code," - ",t.lcZ(5,2,e.selectedRow.name)," ")}}let $=(()=>{class n{constructor(e,i,o,r,u){this.router=e,this.productService=i,this.activated=o,this.spinner=r,this.toastService=u,this.page=1,this.pageSize=10,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.products=[],this.modalService=(0,t.f3M)(y.FF)}updateUser(e){}ngOnInit(){this.getAll()}onChangePage(e){e>0&&(this.page=e),this.getAll()}searchFn(){(this.search.toString().length>=1||0==this.search.toString().length)&&this.getAll()}open(e,i){this.selectedRow=e,this.modalService.open(i,{centered:!0})}add(){this.router.navigate(["/default/product/product-form"])}navigateTo(e,i){i?this.router.navigate([e],{queryParams:{id:i}}):this.router.navigate([e])}deleteProduct(e){this.spinner.show(),this.productService.delete(e).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.modalService.dismissAll(),this.getAll()})}getAll(){this.spinner.show(),this.productService.getAll({page:this.page,pageSize:this.pageSize,search:this.search}).subscribe(i=>{this.spinner.hide(),this.products=i.rows,this.collection=i.count})}openBulkUpload(){this.modalService.open(Q,{centered:!0,size:"lg"}).result.then(i=>{},i=>{this.getAll()})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.F0),t.Y36(C.M),t.Y36(_.gz),t.Y36(p.V),t.Y36(q._W))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-list"]],decls:47,vars:5,consts:[[1,"table-container"],[1,"card","table-card"],[1,"card-title"],[1,"row"],[1,"col"],[1,"card-header"],[1,"row","justify-content-between"],[1,"col-4"],[1,"input-icons"],[1,"input-group","input-group-sm"],["type","search","aria-label","Small","placeholder","Search","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"input-group-append"],["id","inputGroup-sizing-sm",1,"input-group-text","h-100"],[1,"ti","ti-search"],[1,"d-flex","col-auto","justify-content-end"],[1,"btn","add-btn","mx-3",3,"click"],[1,"ti","ti-plus","me-1"],[1,"btn","add-btn",3,"click"],[1,"ti","ti-upload","me-1"],[1,"card-body","p-3"],[1,"table-responsive"],[1,"table","table-hover","table-bordered"],[1,"thead"],[1,"table-secondary"],["scope","col",1,"text-start"],["scope","col"],[1,"tbody","mt-3"],[4,"ngFor","ngForOf"],[3,"page","pageSize","collection","pageChange","pageSizeChange","collectionChange","myOutput"],["deleteModal",""],["scope","row",1,"text-start"],["placement","top",3,"ngbTooltip"],["scope","row",1,"text-center"],["width","30","height","30","alt","",3,"src"],["scope","row"],["ngbTooltip","Update",1,"btn","action-btn","btn-sm","mx-2",3,"click"],[1,"ti","ti-edit-circle"],["ngbTooltip","Delete",1,"btn","action-btn","btn-sm",3,"click"],[1,"ti","ti-trash"],["ngbTooltip","variant",1,"btn","action-btn","btn-sm","mx-2",3,"click"],[1,"fa-brands","fa-vimeo-v"],[1,"modal-header","border-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","border-0"],["id","modal-basic-title",1,"modal-title","text-center","text-primary"],["id","modal-basic-title",1,"modal-title","text-center"],[1,"modal-footer","justify-content-center","border-0"],[1,"btn","px-4","btn-outline-danger",3,"click"],["type","button",1,"btn","px-4","btn-outline-primary",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),t._uU(6,"Product List"),t.qZA()()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"input",10),t.NdJ("ngModelChange",function(u){return o.search=u})("input",function(){return o.searchFn()}),t.qZA(),t.TgZ(13,"div",11)(14,"span",12),t._UZ(15,"i",13),t.qZA()()()()(),t.TgZ(16,"div",14)(17,"button",15),t.NdJ("click",function(){return o.navigateTo("/default/product/product-form",null)}),t._UZ(18,"i",16),t._uU(19," Add Product "),t.qZA(),t.TgZ(20,"button",17),t.NdJ("click",function(){return o.openBulkUpload()}),t._UZ(21,"i",18),t._uU(22," Add Bulk Product "),t.qZA()()()(),t.TgZ(23,"div",19)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr",23)(28,"th",24),t._uU(29,"Product Name"),t.qZA(),t.TgZ(30,"th",25),t._uU(31,"Image"),t.qZA(),t.TgZ(32,"th",25),t._uU(33,"Product Code"),t.qZA(),t.TgZ(34,"th",25),t._uU(35,"GST Rate"),t.qZA(),t.TgZ(36,"th",25),t._uU(37,"Category Name"),t.qZA(),t.TgZ(38,"th",25),t._uU(39,"Status"),t.qZA(),t.TgZ(40,"th",25),t._uU(41,"Action"),t.qZA()()(),t.TgZ(42,"tbody",26),t.YNc(43,W,24,14,"tr",27),t.qZA()()(),t.TgZ(44,"app-custom-pagination",28),t.NdJ("pageChange",function(u){return o.page=u})("pageSizeChange",function(u){return o.pageSize=u})("collectionChange",function(u){return o.collection=u})("myOutput",function(){return o.onChangePage(o.page)}),t.qZA()()()(),t.YNc(45,K,13,4,"ng-template",null,29,t.W1O)),2&i&&(t.xp6(12),t.Q6J("ngModel",o.search),t.xp6(31),t.Q6J("ngForOf",o.products),t.xp6(1),t.Q6J("page",o.page)("pageSize",o.pageSize)("collection",o.collection))},dependencies:[g.sg,s.Fj,s.JJ,s.On,T.W,y._L,g.gd,g.rS],encapsulation:2})}return n})();var V=d(4086),X=d(6279),tt=d(4495);let et=(()=>{class n{constructor(e){this.http=e,this.BASE_URL="productImages"}getAll(e){return this.http.get(this.BASE_URL,e)}create(e){return this.http.post(this.BASE_URL,e).pipe((0,F.U)(i=>i))}update(e,i){return this.http.put(this.BASE_URL+"/"+e,i).pipe((0,F.U)(o=>o))}delete(e){return this.http.delete(this.BASE_URL+"/"+e).pipe((0,F.U)(i=>i))}getById(e){return this.http.get(this.BASE_URL+"/"+e).pipe((0,F.U)(i=>i))}getByProductId(e){return this.http.get(this.BASE_URL+"/getByProductId/"+e).pipe((0,F.U)(i=>i))}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(tt.s))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function it(n,v){if(1&n&&(t.TgZ(0,"div",8),t._UZ(1,"img",23),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.url,t.LSH)}}function ot(n,v){if(1&n){const e=t.EpF();t.TgZ(0,"div",24),t._UZ(1,"img",25),t.TgZ(2,"button",26),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.deleteImg(r.id))}),t._UZ(3,"i",27),t.qZA()()}if(2&n){const e=v.$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH)}}const nt=[{path:"",redirectTo:"product-list",pathMatch:"full"},{path:"product-list",component:$},{path:"product-form",component:A},{path:"product-image",component:(()=>{class n{constructor(e,i,o,r,u,U,N){this.router=e,this.activated=i,this.productImageService=o,this.toastService=r,this.spinner=u,this.validationService=U,this.domSanitizer=N,this.fileName="",this.url=null,this.file=null,this.imageForm=new s.cw({id:new s.NI(null),image:new s.NI(null),productId:new s.NI(null)}),this.options=[],this.imageArr=[],this.FORM_ERRORS=[{message:"Name is required",key:"name"},{message:"Slug is required",key:"slug"},{message:"Status is required",key:"status"}]}get f(){return this.imageForm.controls}ngOnInit(){this.activated.queryParams.subscribe(e=>{e.id&&(this.getByProductId(e.id),this.productId=e.id,this.f.productId.setValue(e.id))})}getByProductId(e){this.spinner.show(),this.productImageService.getByProductId(e).subscribe(i=>{this.imageArr=i,this.spinner.hide()})}submit(){let e=new FormData;for(const i in this.imageForm.value)"image"!=i&&e.append(i,this.imageForm.value[i]);this.file&&e.append("image",this.file,this.file.name),this.imageForm.value.id?this.update(this.imageForm.value.id,e):(e.delete("id"),this.create(e))}create(e){this.spinner.show(),this.productImageService.create(e).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.url=null,this.getByProductId(this.productId)})}update(e,i){this.spinner.show(),this.productImageService.update(e,i).subscribe(o=>{this.spinner.hide(),this.toastService.success(o.message)})}getDataById(e){this.spinner.show(),this.productImageService.getById(e).subscribe(i=>{this.url=i.image,this.imageForm.patchValue(i),this.spinner.hide()})}deleteImg(e){this.spinner.show(),this.productImageService.delete(e).subscribe(i=>{this.spinner.hide(),this.getByProductId(this.productId)})}fileChosen(e){if(console.log("event.target.files",e),e.target.files.length){if(e.target.files[0].size>2e6)return void this.toastService.warning("Unable to upload file of size more than 1MB");this.file=e.target.files[0],this.fileName=this.file.name;const o=new FileReader;o.readAsDataURL(this.file),o.onload=()=>{this.url=this.domSanitizer.bypassSecurityTrustUrl(o.result)},o.onerror=r=>{console.error(r)}}}back(){this.router.navigate(["default/product/product-list"])}reset(){this.imageForm.reset(),this.productId&&this.getDataById(this.productId)}openUrl(e){window.open(e,"_blank")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.F0),t.Y36(_.gz),t.Y36(et),t.Y36(l.k),t.Y36(p.V),t.Y36(a.R),t.Y36(m.H7))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-images"]],decls:37,vars:4,consts:[[1,"card","form-card"],[1,"card-header"],[1,"card-header-items"],[1,"back-btn","btn","btn-primary",3,"click"],[1,"ti","ti-arrow-left","me-1"],[1,"card-body","mt-3","justify-content-center"],[3,"formGroup"],[1,"row","px-2"],[1,"col-md-4","ps-0","mb-3"],[1,"form-label"],[1,"text-danger"],[1,"d-flex"],["for","file",1,"file-upload-label"],[1,"file-upload-design"],["viewBox","0 0 640 512","height","1em"],["d","M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"],[1,"browse-button"],["id","file","accept",".png, .jpg, .jpeg","type","file",3,"multiple","change"],[1,"mt-3"],["type","submit",1,"btn","px-5","btn-primary","mx-2","shadow","rounded","rounded-3","d-flex","align-items-center",3,"click"],["class","col-md-4 ps-0 mb-3 ",4,"ngIf"],[1,"row"],["class","col-3 mb-3 image",4,"ngFor","ngForOf"],["alt","image",1,"w-100","new-img",3,"src"],[1,"col-3","mb-3","image"],["alt","image",1,"w-100",3,"src"],[1,"btn","btn-outline-danger","cross-btn",3,"click"],[1,"fa-solid","fa-xmark"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),t._uU(4,"Variant Images"),t.qZA(),t.TgZ(5,"div")(6,"a",3),t.NdJ("click",function(){return o.back()}),t._UZ(7,"i",4),t._uU(8," Back"),t.qZA()()()(),t.TgZ(9,"div",5)(10,"form",6)(11,"div",7)(12,"div",8)(13,"div")(14,"label",9),t._uU(15," Variant Images "),t.TgZ(16,"span",10),t._uU(17,"*"),t.qZA()()(),t.TgZ(18,"div",11)(19,"label",12)(20,"div",13),t.O4$(),t.TgZ(21,"svg",14),t._UZ(22,"path",15),t.qZA(),t.kcU(),t.TgZ(23,"p"),t._uU(24,"Drag and Drop"),t.qZA(),t.TgZ(25,"p"),t._uU(26,"or"),t.qZA(),t.TgZ(27,"span",16),t._uU(28,"Browse file"),t.qZA()(),t.TgZ(29,"input",17),t.NdJ("change",function(u){return o.fileChosen(u)}),t.qZA()()(),t.TgZ(30,"div",18)(31,"button",19),t.NdJ("click",function(){return o.submit()}),t._uU(32," Add "),t.qZA()()(),t.YNc(33,it,2,1,"div",20),t.qZA()(),t._UZ(34,"hr"),t.TgZ(35,"div",21),t.YNc(36,ot,4,1,"div",22),t.qZA()()()),2&i&&(t.xp6(10),t.Q6J("formGroup",o.imageForm),t.xp6(19),t.Q6J("multiple",!1),t.xp6(4),t.Q6J("ngIf",o.url),t.xp6(3),t.Q6J("ngForOf",o.imageArr))},dependencies:[g.sg,g.O5,s._Y,s.JL,s.sg],styles:[".cross-btn[_ngcontent-%COMP%]{width:25px;height:25px;padding:0;display:flex;justify-content:center;align-items:center;position:absolute;top:5%;right:5%}.new-img[_ngcontent-%COMP%]{height:200px;width:200px!important;object-fit:contain}"]})}return n})()}];let rt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({providers:[M],imports:[g.ez,s.u5,s.UX,X.Ek,T.W,V.m,c.A0,_.Bz.forChild(nt)]})}return n})()},217:function(k,S){var d,s;void 0!==(s="function"==typeof(d=function(){"use strict";function t(p,l,m){var a=new XMLHttpRequest;a.open("GET",p),a.responseType="blob",a.onload=function(){x(a.response,l,m)},a.onerror=function(){console.error("could not download file")},a.send()}function _(p){var l=new XMLHttpRequest;l.open("HEAD",p,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function C(p){try{p.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(l)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,w=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),x=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!w?function(p,l,m){var a=f.URL||f.webkitURL,c=document.createElement("a");c.download=l=l||p.name||"download",c.rel="noopener","string"==typeof p?(c.href=p,c.origin===location.origin?C(c):_(c.href)?t(p,l,m):C(c,c.target="_blank")):(c.href=a.createObjectURL(p),setTimeout(function(){a.revokeObjectURL(c.href)},4e4),setTimeout(function(){C(c)},0))}:"msSaveOrOpenBlob"in navigator?function(p,l,m){if(l=l||p.name||"download","string"!=typeof p)navigator.msSaveOrOpenBlob(function T(p,l){return typeof l>"u"?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\ufeff",p],{type:p.type}):p}(p,m),l);else if(_(p))t(p,l,m);else{var a=document.createElement("a");a.href=p,a.target="_blank",setTimeout(function(){C(a)})}}:function(p,l,m,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof p)return t(p,l,m);var c="application/octet-stream"===p.type,h=/constructor/i.test(f.HTMLElement)||f.safari,Z=/CriOS\/[\d]+/.test(navigator.userAgent);if((Z||c&&h||w)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var y=b.result;y=Z?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=y:location=y,a=null},b.readAsDataURL(p)}else{var I=f.URL||f.webkitURL,A=I.createObjectURL(p);a?a.location=A:location.href=A,a=null,setTimeout(function(){I.revokeObjectURL(A)},4e4)}});f.saveAs=x.saveAs=x,k.exports=x})?d.apply(S,[]):d)&&(k.exports=s)}}]);