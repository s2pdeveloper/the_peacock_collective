"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[877],{4495:(q,T,a)=>{a.d(T,{s:()=>U});var g=a(9862),h=a(3997),i=a(7398),t=a(8645),v=a(4552);class y extends t.x{constructor(u=1/0,s=1/0,r=v.l){super(),this._bufferSize=u,this._windowTime=s,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=s===1/0,this._bufferSize=Math.max(1,u),this._windowTime=Math.max(1,s)}next(u){const{isStopped:s,_buffer:r,_infiniteTimeWindow:m,_timestampProvider:f,_windowTime:_}=this;s||(r.push(u),!m&&r.push(f.now()+_)),this._trimBuffer(),super.next(u)}_subscribe(u){this._throwIfClosed(),this._trimBuffer();const s=this._innerSubscribe(u),{_infiniteTimeWindow:r,_buffer:m}=this,f=m.slice();for(let _=0;_<f.length&&!u.closed;_+=r?1:2)u.next(f[_]);return this._checkFinalizedStatuses(u),s}_trimBuffer(){const{_bufferSize:u,_timestampProvider:s,_buffer:r,_infiniteTimeWindow:m}=this,f=(m?1:2)*u;if(u<1/0&&f<r.length&&r.splice(0,r.length-f),!m){const _=s.now();let l=0;for(let Z=1;Z<r.length&&r[Z]<=_;Z+=2)l=Z;l&&r.splice(0,l+1)}}}var A=a(3020);function C(p,u,s){let r,m=!1;return p&&"object"==typeof p?({bufferSize:r=1/0,windowTime:u=1/0,refCount:m=!1,scheduler:s}=p):r=p??1/0,(0,A.B)({connector:()=>new y(r,u,s),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:m})}var b=a(5879);let U=(()=>{class p{constructor(s){this.httpClient=s,this.options={headers:(new g.WM).set("Content-Type","application/json")}}private(){return`${location.protocol}//${location.hostname+(location.port?":"+location.port:"")}/`}get(s,r=new g.LE){return(0,h.x)(),this.httpClient.get(s,{params:r}).pipe((0,i.U)(m=>m.result),C())}put(s,r={}){return(0,h.x)(),this.httpClient.put(s,r).pipe((0,i.U)(m=>m.result))}post(s,r={}){return(0,h.x)(),this.httpClient.post(s,r).pipe((0,i.U)(m=>m.result))}delete(s){return(0,h.x)(),this.httpClient.delete(s).pipe((0,i.U)(r=>r.result),C())}getFile(s,r=new g.LE){return this.httpClient.get(s,{responseType:"blob",headers:(new g.WM).append("Content-Type","application/json")})}getIp(){return(0,h.x)(),this.httpClient.get("https://ipapi.co/json/").pipe(C())}static#t=this.\u0275fac=function(r){return new(r||p)(b.LFG(g.eN))};static#e=this.\u0275prov=b.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},4093:(q,T,a)=>{a.r(T),a.d(T,{CustomerModule:()=>_});var g=a(6814),h=a(1076),i=a(95),t=a(5879),v=a(7285),y=a(503),A=a(4087),C=a(485),b=a(7741);function U(l,Z){if(1&l){const e=t.EpF();t.TgZ(0,"tr")(1,"td",27),t._uU(2),t.qZA(),t.TgZ(3,"td",28),t._uU(4),t.qZA(),t.TgZ(5,"td",28),t._uU(6),t.qZA(),t.TgZ(7,"td",27),t._uU(8),t.qZA(),t.TgZ(9,"td",27),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",29),t.ynx(13),t.TgZ(14,"button",30),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.navigateTo("/default/customer/customer-form",null==c?null:c._id))}),t._UZ(15,"i",31),t.qZA(),t.TgZ(16,"button",32),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw(),N=t.MAs(39);return t.KtG(d.open(c,N))}),t._UZ(17,"i",33),t.qZA(),t.BQk(),t.qZA()()}if(2&l){const e=Z.$implicit,n=Z.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(null==e?null:e.customerName),t.xp6(2),t.Oqu(null==e?null:e.email),t.xp6(2),t.Oqu(null==e?null:e.mobile),t.xp6(2),t.Oqu(t.lcZ(11,5,null==e?null:e.DOB))}}function p(l,Z){if(1&l){const e=t.EpF();t.TgZ(0,"div",34)(1,"button",35),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.KtG(c.dismiss("Cross click"))}),t.qZA()(),t.TgZ(2,"div",36)(3,"h2",37),t._uU(4),t.qZA(),t.TgZ(5,"h4",38),t._uU(6," Are you sure you want to Delete ? "),t.qZA()(),t.TgZ(7,"div",39)(8,"button",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.delete(null==o.selectedRow?null:o.selectedRow._id))}),t._uU(9," YES "),t.qZA(),t.TgZ(10,"button",41),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.KtG(c.dismiss("Cross click"))}),t._uU(11," NO "),t.qZA()()}if(2&l){const e=t.oxw();t.xp6(4),t.hij(" ",null==e.selectedRow?null:e.selectedRow.customerName," ")}}let u=(()=>{class l{constructor(e,n,o,c,d){this.router=e,this.customerService=n,this.activated=o,this.spinner=c,this.toastService=d,this.modalService=(0,t.f3M)(v.FF),this.page=1,this.pageSize=25,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.customer=[],this.address=""}ngOnInit(){this.getAll()}navigateTo(e,n){n?this.router.navigate([e],{queryParams:{id:n}}):this.router.navigate([e])}open(e,n){this.selectedRow=e,this.modalService.open(n,{centered:!0})}searchFn(){(this.search.toString().length>=3||0==this.search.toString().length)&&this.getAll()}delete(e){this.spinner.show(),this.customerService.delete(e).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.modalService.dismissAll(),this.getAll()})}onChangePage(e){e>0&&(this.page=e),this.getAll()}getAll(){this.spinner.show(),this.customerService.getAll({page:this.page,pageSize:this.pageSize,search:this.search}).subscribe(n=>{this.spinner.hide(),this.customer=n.rows,this.collection=n.count})}static#t=this.\u0275fac=function(n){return new(n||l)(t.Y36(h.F0),t.Y36(y.v),t.Y36(h.gz),t.Y36(A.V),t.Y36(C.k))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-customer-list"]],decls:40,vars:5,consts:[[1,"table-container"],[1,"card","table-card"],[1,"card-title"],[1,"card-header"],[1,"row","justify-content-between"],[1,"col-4"],[1,"input-icons"],[1,"input-group","input-group-sm"],["type","search","aria-label","Small","placeholder","Search","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"input-group-append"],["id","inputGroup-sizing-sm",1,"input-group-text","h-100"],[1,"ti","ti-search"],[1,"col-md-4","col-3","text-right"],[1,"btn","add-btn",3,"click"],[1,"ti","ti-plus","me-1"],[1,"card-body","p-3"],[1,"table-responsive"],[1,"table","table-hover","table-bordered"],[1,"thead"],[1,"table-secondary"],["scope","col"],["scope","col",1,"text-start"],["scope","col",1,"mx-auto","text-center"],[1,"tbody","mt-3"],[4,"ngFor","ngForOf"],[3,"page","pageSize","collection","pageChange","pageSizeChange","collectionChange","myOutput"],["deleteModal",""],["scope","row"],["scope","row",1,"text-start"],["scope","row",1,"text-center"],["ngbTooltip","Update",1,"btn","action-btn","btn-sm","mx-2",3,"click"],[1,"ti","ti-edit-circle"],["ngbTooltip","Delete",1,"btn","action-btn","btn-sm",3,"click"],[1,"ti","ti-trash"],[1,"modal-header","border-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","border-0"],["id","modal-basic-title",1,"modal-title","text-center","text-primary"],["id","modal-basic-title",1,"modal-title","text-center"],[1,"modal-footer","justify-content-center","border-0"],["type","button",1,"btn","px-4","btn-danger",3,"click"],["type","button",1,"btn","px-4","btn-primary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4,"Customer List"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"input",8),t.NdJ("ngModelChange",function(d){return o.search=d})("input",function(){return o.searchFn()}),t.qZA(),t.TgZ(11,"div",9)(12,"span",10),t._UZ(13,"i",11),t.qZA()()()()(),t.TgZ(14,"div",12)(15,"button",13),t.NdJ("click",function(){return o.navigateTo("/default/customer/customer-form",null)}),t._UZ(16,"i",14),t._uU(17," Add Customer "),t.qZA()()()(),t.TgZ(18,"div",15)(19,"div",16)(20,"table",17)(21,"thead",18)(22,"tr",19)(23,"th",20),t._uU(24,"Sr. No."),t.qZA(),t.TgZ(25,"th",21),t._uU(26,"Name"),t.qZA(),t.TgZ(27,"th",21),t._uU(28,"Email"),t.qZA(),t.TgZ(29,"th",20),t._uU(30,"Mobile No."),t.qZA(),t.TgZ(31,"th",20),t._uU(32,"DOB"),t.qZA(),t.TgZ(33,"th",22),t._uU(34,"Action"),t.qZA()()(),t.TgZ(35,"tbody",23),t.YNc(36,U,18,7,"tr",24),t.qZA()()(),t.TgZ(37,"app-custom-pagination",25),t.NdJ("pageChange",function(d){return o.page=d})("pageSizeChange",function(d){return o.pageSize=d})("collectionChange",function(d){return o.collection=d})("myOutput",function(){return o.onChangePage(o.page)}),t.qZA()()()(),t.YNc(38,p,12,1,"ng-template",null,26,t.W1O)),2&n&&(t.xp6(10),t.Q6J("ngModel",o.search),t.xp6(26),t.Q6J("ngForOf",o.customer),t.xp6(1),t.Q6J("page",o.page)("pageSize",o.pageSize)("collection",o.collection))},dependencies:[g.sg,v._L,i.Fj,i.JJ,i.On,b.W,g.uU],styles:[".addbtn[_ngcontent-%COMP%]{position:absolute;top:70px;right:10px}"]})}return l})();var s=a(6857);let r=(()=>{class l{constructor(e,n,o,c,d,N,x,w){this.formBuilder=e,this.router=n,this.spinner=o,this.validationService=c,this.activated=d,this.customerService=N,this.toastService=x,this.modelService=w,this.submitted=!1,this.userId=null,this.customerForm=new i.cw({_id:new i.NI(null),customerName:new i.NI(null,[i.kI.required]),mobile:new i.NI(null,[i.kI.required]),whatsUp:new i.NI(null),email:new i.NI(null),DOB:new i.NI(null),currency:new i.NI("INR"),address:new i.cw({line1:new i.NI(null),line2:new i.NI(null),city:new i.NI(null),state:new i.NI(null),country:new i.NI("India"),pinCode:new i.NI(null)}),anniversaryDate:new i.NI(null)}),this.FORM_ERRORS=[{message:"Name is Required",key:"customerName"},{message:"Mobile is Required",key:"mobile"}]}get f(){return this.customerForm.controls}ngOnInit(){this.activated.queryParams.subscribe(e=>{null!=e.id&&(this.userId=e.id,this.getDataById(e.id))})}navigateTo(e){this.router.navigate([e])}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.customerForm,this.FORM_ERRORS))return;let e=this.customerForm.value;e.role="Admin",e._id?(delete e.password,this.update(e)):(delete e._id,this.create(e))}create(e){this.spinner.show(),this.customerService.create(e).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.router.navigate(["default/customer/customer-list"])})}update(e){this.spinner.show(),this.customerService.update(e._id,e).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.router.navigate(["/default/customer/customer-list"])})}getDataById(e){this.spinner.show(),this.customerService.getById(e).subscribe(n=>{this.customerForm.patchValue(n),this.spinner.hide()})}reset(){this.customerForm.reset(),this.userId&&this.getDataById(this.userId)}static#t=this.\u0275fac=function(n){return new(n||l)(t.Y36(i.qu),t.Y36(h.F0),t.Y36(A.V),t.Y36(s.R),t.Y36(h.gz),t.Y36(y.v),t.Y36(C.k),t.Y36(v.FF))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-customer-form"]],decls:90,vars:7,consts:[[1,"card","form-card"],[1,"card-header"],[1,"card-header-items"],[1,"ms-2"],[1,"back-btn","btn","btn-primary",3,"click"],[1,"ti","ti-arrow-left","me-1"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6","mb-2"],[1,"form-label"],[1,"text-danger"],["formControlName","customerName","placeholder","Full Name","type","text",1,"form-control"],["formControlName","mobile","placeholder","Mobile","type","text",1,"form-control"],["formControlName","email","placeholder","Email","type","text",1,"form-control"],["formControlName","whatsUp","placeholder","AlternateMobile","type","text",1,"form-control"],["formControlName","DOB","placeholder","DOB","type","date",1,"form-control"],["formControlName","currency",1,"form-control"],["selected","","disabled","","value","null"],["value","INR"],["value","USD"],[1,"col-md-12"],["formControlName","anniversaryDate","placeholder","DOB","type","date",1,"form-control"],[1,"my-3"],[1,""],["formGroupName","address",1,"row"],[1,"col-md-4","mb-2"],["formControlName","line1","placeholder","line1","type","text",1,"form-control"],["formControlName","line2","placeholder","line2","type","text",1,"form-control"],["formControlName","city","placeholder","city","type","text",1,"form-control"],[1,"col-md-4"],["formControlName","state","placeholder","state","type","text",1,"form-control"],["formControlName","country","placeholder","country","type","text",1,"form-control"],["formControlName","pinCode","placeholder","pinCode","type","number",1,"form-control"],[1,"col-12"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","reset-btn","btn-primary",3,"click"],[1,"fa-solid","fa-arrows-rotate","me-2"],["type","submit",1,"btn","submit-btn",3,"click"],[1,"fa-solid","me-2"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4),t.qZA(),t.TgZ(5,"div")(6,"a",4),t.NdJ("click",function(){return o.navigateTo("/default/customer/customer-list")}),t._UZ(7,"i",5),t._uU(8," Back"),t.qZA()()()(),t.TgZ(9,"div",6)(10,"form",7)(11,"div",8)(12,"div",9)(13,"label",10),t._uU(14," Name "),t.TgZ(15,"span",11),t._uU(16,"*"),t.qZA()(),t._UZ(17,"input",12)(18,"div"),t.qZA(),t.TgZ(19,"div",9)(20,"label",10),t._uU(21," Mobile Number "),t.TgZ(22,"span",11),t._uU(23,"*"),t.qZA()(),t._UZ(24,"input",13),t.qZA()(),t.TgZ(25,"div",8)(26,"div",9)(27,"label",10),t._uU(28," Email "),t.qZA(),t._UZ(29,"input",14),t.qZA(),t.TgZ(30,"div",9)(31,"label",10),t._uU(32," Alternate Mobile "),t.qZA(),t._UZ(33,"input",15),t.qZA(),t.TgZ(34,"div",9)(35,"label",10),t._uU(36," DOB "),t.qZA(),t._UZ(37,"input",16),t.qZA(),t.TgZ(38,"div",9)(39,"label",10),t._uU(40," Currency "),t.qZA(),t.TgZ(41,"select",17)(42,"option",18),t._uU(43,"Select Currency"),t.qZA(),t.TgZ(44,"option",19),t._uU(45,"INR"),t.qZA(),t.TgZ(46,"option",20),t._uU(47,"USD"),t.qZA()()(),t.TgZ(48,"div",21)(49,"label",10),t._uU(50,"Anniversary Date"),t.qZA(),t._UZ(51,"input",22),t.qZA()(),t._UZ(52,"hr",23),t.TgZ(53,"h5",24),t._uU(54,"Address details"),t.qZA(),t.TgZ(55,"div",25)(56,"div",26)(57,"label",10),t._uU(58," Line 1 "),t.qZA(),t._UZ(59,"input",27),t.qZA(),t.TgZ(60,"div",26)(61,"label",10),t._uU(62," Line 2 "),t.qZA(),t._UZ(63,"input",28),t.qZA(),t.TgZ(64,"div",26)(65,"label",10),t._uU(66," City "),t.qZA(),t._UZ(67,"input",29),t.qZA(),t.TgZ(68,"div",30)(69,"label",10),t._uU(70," State "),t.qZA(),t._UZ(71,"input",31),t.qZA(),t.TgZ(72,"div",30)(73,"label",10),t._uU(74," Country "),t.qZA(),t._UZ(75,"input",32),t.qZA(),t.TgZ(76,"div",30)(77,"label",10),t._uU(78," Pin Code "),t.qZA(),t._UZ(79,"input",33),t.qZA()(),t._UZ(80,"hr",23),t.TgZ(81,"div",8)(82,"div",34)(83,"div",35)(84,"button",36),t.NdJ("click",function(){return o.reset()}),t._UZ(85,"i",37),t._uU(86," Reset "),t.qZA(),t.TgZ(87,"button",38),t.NdJ("click",function(){return o.submit()}),t._UZ(88,"i",39),t._uU(89),t.qZA()()()()()()()),2&n&&(t.xp6(4),t.hij("",o.userId?"Update":"Create"," Customer"),t.xp6(6),t.Q6J("formGroup",o.customerForm),t.xp6(77),t.Tol(o.userId?"btn-warning":"btn-success"),t.xp6(1),t.Tol(o.userId?"fa-pen-to-square":"fa-plus"),t.xp6(1),t.hij(" ",o.userId?"Update":"Create"," "))},dependencies:[i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i.JJ,i.JL,i.sg,i.u,i.x0],encapsulation:2})}return l})();var m=a(8672);const f=[{path:"",redirectTo:"customer-list",pathMatch:"full"},{path:"customer-list",component:u},{path:"customer-form",component:r}];let _=(()=>{class l{static#t=this.\u0275fac=function(n){return new(n||l)};static#e=this.\u0275mod=t.oAB({type:l});static#i=this.\u0275inj=t.cJS({imports:[g.ez,v.HK,m.ef,h.Bz.forChild(f),i.u5,i.UX,b.W]})}return l})()}}]);