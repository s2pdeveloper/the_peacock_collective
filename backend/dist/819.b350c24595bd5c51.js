"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[819],{4495:(N,U,a)=>{a.d(U,{s:()=>F});var g=a(9862),v=a(3997),_=a(7398),A=a(8645),r=a(4552);class t extends A.x{constructor(c=1/0,s=1/0,i=r.l){super(),this._bufferSize=c,this._windowTime=s,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=s===1/0,this._bufferSize=Math.max(1,c),this._windowTime=Math.max(1,s)}next(c){const{isStopped:s,_buffer:i,_infiniteTimeWindow:m,_timestampProvider:h,_windowTime:f}=this;s||(i.push(c),!m&&i.push(h.now()+f)),this._trimBuffer(),super.next(c)}_subscribe(c){this._throwIfClosed(),this._trimBuffer();const s=this._innerSubscribe(c),{_infiniteTimeWindow:i,_buffer:m}=this,h=m.slice();for(let f=0;f<h.length&&!c.closed;f+=i?1:2)c.next(h[f]);return this._checkFinalizedStatuses(c),s}_trimBuffer(){const{_bufferSize:c,_timestampProvider:s,_buffer:i,_infiniteTimeWindow:m}=this,h=(m?1:2)*c;if(c<1/0&&h<i.length&&i.splice(0,i.length-h),!m){const f=s.now();let C=0;for(let Z=1;Z<i.length&&i[Z]<=f;Z+=2)C=Z;C&&i.splice(0,C+1)}}}var x=a(3020);function y(u,c,s){let i,m=!1;return u&&"object"==typeof u?({bufferSize:i=1/0,windowTime:c=1/0,refCount:m=!1,scheduler:s}=u):i=u??1/0,(0,x.B)({connector:()=>new t(i,c,s),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:m})}var T=a(5879);let F=(()=>{class u{constructor(s){this.httpClient=s,this.options={headers:(new g.WM).set("Content-Type","application/json")}}private(){return`${location.protocol}//${location.hostname+(location.port?":"+location.port:"")}/`}get(s,i=new g.LE){return(0,v.x)(),this.httpClient.get(s,{params:i}).pipe((0,_.U)(m=>m.result),y())}put(s,i={}){return(0,v.x)(),this.httpClient.put(s,i).pipe((0,_.U)(m=>m.result))}post(s,i={}){return(0,v.x)(),this.httpClient.post(s,i).pipe((0,_.U)(m=>m.result))}delete(s){return(0,v.x)(),this.httpClient.delete(s).pipe((0,_.U)(i=>i.result),y())}getFile(s,i=new g.LE){return this.httpClient.get(s,{responseType:"blob",headers:(new g.WM).append("Content-Type","application/json")})}getIp(){return(0,v.x)(),this.httpClient.get("https://ipapi.co/json/").pipe(y())}static#t=this.\u0275fac=function(i){return new(i||u)(T.LFG(g.eN))};static#e=this.\u0275prov=T.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},4819:(N,U,a)=>{a.r(U),a.d(U,{ShopModule:()=>O});var g=a(1076),v=a(8672),_=a(7285),A=a(7741),r=a(95),t=a(5879),x=a(4087),y=a(485),T=a(6857),F=a(3873),u=a(7398),c=a(4495);let s=(()=>{class p{constructor(e){this.http=e,this.routes={getAllPath:"autoIncrement/getAll",updatePath:o=>`autoIncrement/update/${o}`}}getAll(e){return this.http.get(this.routes.getAllPath,e).pipe((0,u.U)(o=>o))}update(e,o){return this.http.put(this.routes.updatePath(e),o).pipe((0,u.U)(n=>n))}static#t=this.\u0275fac=function(o){return new(o||p)(t.LFG(c.s))};static#e=this.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})();var i=a(6814),m=a(8939);function h(p,b){if(1&p){const e=t.EpF();t._UZ(0,"div",56),t.TgZ(1,"div",57)(2,"div",58),t._UZ(3,"i",59),t.qZA(),t._uU(4," Upload File (Drag & Drop) "),t.TgZ(5,"div",60),t._uU(6,"OR"),t.qZA(),t.TgZ(7,"div",61)(8,"div",62)(9,"button",63),t.NdJ("click",function(){const l=t.CHM(e).openFileSelector;return t.KtG(l())}),t._uU(10," Browse File "),t.qZA()()()()}}function f(p,b){if(1&p&&t._UZ(0,"img",64),2&p){const e=t.oxw();t.Q6J("src",e.fileContentImage,t.LSH)}}function C(p,b){1&p&&t._UZ(0,"img",65)}const Z=function(){return{standalone:!0}};function S(p,b){if(1&p){const e=t.EpF();t.TgZ(0,"tr")(1,"td",66),t._uU(2),t.qZA(),t.TgZ(3,"td",66),t._uU(4),t.qZA(),t.TgZ(5,"td",66),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div",39)(9,"input",67),t.NdJ("ngModelChange",function(n){const d=t.CHM(e).$implicit;return t.KtG(d.modulePrefix=n)}),t.qZA()()(),t.TgZ(10,"td")(11,"div",39)(12,"input",67),t.NdJ("ngModelChange",function(n){const d=t.CHM(e).$implicit;return t.KtG(d.digit=n)}),t.qZA()()(),t.TgZ(13,"td")(14,"div",39)(15,"input",68),t.NdJ("ngModelChange",function(n){const d=t.CHM(e).$implicit;return t.KtG(d.autoIncrementValue=n)}),t.qZA()()(),t.TgZ(16,"td",69),t.ynx(17),t.TgZ(18,"button",42),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.update(l))}),t._UZ(19,"i",43),t._uU(20," Update "),t.qZA(),t.BQk(),t.qZA()()}if(2&p){const e=b.$implicit,o=b.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.moduleName),t.xp6(2),t.Oqu(e.module),t.xp6(3),t.Q6J("ngModel",e.modulePrefix)("ngModelOptions",t.DdM(13,Z)),t.xp6(3),t.Q6J("ngModel",e.digit)("ngModelOptions",t.DdM(14,Z)),t.xp6(3),t.Q6J("ngModel",e.autoIncrementValue)("ngModelOptions",t.DdM(15,Z)),t.xp6(3),t.Tol("btn-warning"),t.xp6(1),t.Tol("fa-pen-to-square")}}let w=(()=>{class p{constructor(e,o,n,l,d,I,D,J){this.router=e,this.spinner=o,this.validationService=n,this.shopService=l,this.autoIncrementService=d,this.toastService=I,this.modelService=D,this.location=J,this.submitted=!1,this.userId=null,this.allData=[],this.shopForm=new r.cw({_id:new r.NI(null),name:new r.NI(null,[r.kI.required]),shopName:new r.NI(null,[r.kI.required]),mobile:new r.NI(null),whatsUp:new r.NI(null),email:new r.NI(null),workingDays:new r.NI(null),time:new r.NI(null),logo:new r.NI(null),address:new r.cw({line1:new r.NI(null),line2:new r.NI(null),city:new r.NI(null),state:new r.NI(null),country:new r.NI("India"),pinCode:new r.NI(null)})}),this.FORM_ERRORS=[{message:"Name is Required",key:"name"},{message:"Shop name is Required",key:"shopName"}]}get f(){return this.shopForm.controls}ngOnInit(){this.getDataById(),this.getAll()}submit(){if(!this.validationService.checkErrors(this.shopForm,this.FORM_ERRORS)){this.spinner.show();let e=new FormData,o=this.shopForm.value;for(let n=0;n<Object.keys(o).length;n++){const l=Object.keys(o)[n];o[l]&&"object"==typeof o[l]?o[l]&&e.append(l,JSON.stringify(o[l])):(o[l]||0==o[l])&&e.append(l,o[l])}this.document&&e.append("logo",this.document,this.document.name),this.spinner.show(),this.shopService.createOrUpdate(e).subscribe({next:n=>{this.spinner.hide(),this.toastService.success(n.message),this.back()},error:n=>{console.error(n),this.spinner.hide()}})}}getDataById(){this.spinner.show(),this.shopService.getById().subscribe(e=>{this.userId=e._id,this.fileContentImage=e.logo,this.shopForm.patchValue(e),this.spinner.hide()})}reset(){this.shopForm.reset(),this.userId&&this.getDataById()}back(){this.location.back()}getAll(){this.spinner.show(),this.autoIncrementService.getAll({}).subscribe(e=>{this.spinner.hide(),this.allData=e.rows})}update(e){this.spinner.show(),this.autoIncrementService.update(e._id,e).subscribe(o=>{this.spinner.hide(),this.toastService.success(o.message),this.getAll()})}dropped(e){for(const o of e)o.fileEntry.isFile&&o.fileEntry.file(l=>{if(l.size<=1e6){this.document=l;const d=new FileReader;d.readAsDataURL(l),d.onload=()=>{this.fileContentImage=d.result},d.onerror=I=>{console.error(I),this.toastService.error("Unable to upload image of size more than 1mb")}}else this.toastService.error("Unable to upload image of size more than 1mb")})}fileOver(e){console.log(e)}fileLeave(e){console.log(e)}static#t=this.\u0275fac=function(o){return new(o||p)(t.Y36(g.F0),t.Y36(x.V),t.Y36(T.R),t.Y36(F.d),t.Y36(s),t.Y36(y.k),t.Y36(_.FF),t.Y36(i.Ye))};static#e=this.\u0275cmp=t.Xpm({type:p,selectors:[["app-shop-form"]],decls:124,vars:9,consts:[[1,"card","form-card"],[1,"card-header"],[1,"card-header-items"],[1,"ms-2"],[1,"back-btn","btn","btn-primary",3,"click"],[1,"ti","ti-arrow-left","me-1"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-4","mb-2"],[1,"form-label"],[1,"text-danger"],["formControlName","name","placeholder","Full Name","type","text",1,"form-control"],["formControlName","shopName","placeholder","Shop Name","type","text",1,"form-control"],["formControlName","mobile","placeholder","Mobile","type","text",1,"form-control"],["formControlName","whatsUp","placeholder","AlternateMobile","type","text",1,"form-control"],[1,"col-md-4"],["formControlName","email","placeholder","Email","type","text",1,"form-control"],["formControlName","time","placeholder","Time","type","text",1,"form-control"],[1,"col-md-12"],["formControlName","workingDays","placeholder","Working Days","type","text",1,"form-control"],[1,"my-3"],[1,""],["formGroupName","address",1,"row"],["formControlName","line1","placeholder","line1","type","text",1,"form-control"],["formControlName","line2","placeholder","line2","type","text",1,"form-control"],["formControlName","city","placeholder","city","type","text",1,"form-control"],["formControlName","state","placeholder","state","type","text",1,"form-control"],["formControlName","country","placeholder","country","type","text",1,"form-control"],["formControlName","pinCode","placeholder","pinCode","type","number",1,"form-control"],[1,"col-md-9","pt-3","border","border-2","border-secondary"],[1,"form-group","satFat-logoBody"],["for","companyLogo"],["dropZoneClassName","satFat-dropZoneBody imgBorderYes","contentClassName","satFat-contentBody","accept","image/jpeg, image/png",1,"ngx-fileDropBody",3,"onFileDrop","onFileOver","onFileLeave"],["ngx-file-drop-content-tmp",""],[1,"col-md-3","text-center","align-self-center"],["class","img-fluid img-size","width","100",3,"src",4,"ngIf","ngIfElse"],["templateImage",""],[1,"col-12","my-1"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","reset-btn","btn-primary",3,"click"],[1,"fa-solid","fa-arrows-rotate","me-2"],["type","submit",1,"btn","submit-btn",3,"click"],[1,"fa-solid","me-2"],[1,"table-container","mt-5"],[1,"card","table-card"],[1,"card-title"],[1,"card-body","p-3"],[1,"table-responsive"],[1,"table","table-hover","table-bordered"],[1,"thead"],[1,"table-secondary"],["scope","col"],["scope","col",1,"mx-auto","text-center"],[1,"tbody","mt-3"],[4,"ngFor","ngForOf"],[1,"align-self-center"],[1,"imgNone","d-flex","flex-column","text-center"],[1,"cloudIcon"],[1,"fa","fa-cloud-upload"],[1,"text-dark"],[1,"row","justify-content-center"],[1,"col-3","d-grid"],["type","button",1,"btn","btn-secondary",3,"click"],["width","100",1,"img-fluid","img-size",3,"src"],["src","../../../../assets/images/user/avatar-2.jpg","alt","placeholder Image","width","100"],["scope","row"],["type","text",1,"form-control","form-control-sm","w-50",3,"ngModel","ngModelOptions","ngModelChange"],["type","number",1,"form-control","form-control-sm","w-50",3,"ngModel","ngModelOptions","ngModelChange"],["scope","row",1,"text-center"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Shop Details"),t.qZA(),t.TgZ(5,"div")(6,"a",4),t.NdJ("click",function(){return n.back()}),t._UZ(7,"i",5),t._uU(8," Back"),t.qZA()()()(),t.TgZ(9,"div",6)(10,"form",7)(11,"div",8)(12,"div",9)(13,"label",10),t._uU(14," Name "),t.TgZ(15,"span",11),t._uU(16,"*"),t.qZA()(),t._UZ(17,"input",12)(18,"div"),t.qZA(),t.TgZ(19,"div",9)(20,"label",10),t._uU(21," Shop Name "),t.TgZ(22,"span",11),t._uU(23,"*"),t.qZA()(),t._UZ(24,"input",13),t.qZA(),t.TgZ(25,"div",9)(26,"label",10),t._uU(27," Mobile Number "),t.qZA(),t._UZ(28,"input",14),t.qZA()(),t.TgZ(29,"div",8)(30,"div",9)(31,"label",10),t._uU(32," Alternate Mobile "),t.qZA(),t._UZ(33,"input",15),t.qZA(),t.TgZ(34,"div",16)(35,"label",10),t._uU(36," Email "),t.qZA(),t._UZ(37,"input",17),t.qZA(),t.TgZ(38,"div",9)(39,"label",10),t._uU(40," Time "),t.qZA(),t._UZ(41,"input",18),t.qZA()(),t.TgZ(42,"div",8)(43,"div",19)(44,"label",10),t._uU(45," Working Days "),t.qZA(),t._UZ(46,"input",20),t.qZA()(),t._UZ(47,"hr",21),t.TgZ(48,"h5",22),t._uU(49,"Address details"),t.qZA(),t.TgZ(50,"div",23)(51,"div",9)(52,"label",10),t._uU(53," Line 1 "),t.qZA(),t._UZ(54,"input",24),t.qZA(),t.TgZ(55,"div",9)(56,"label",10),t._uU(57," Line 2 "),t.qZA(),t._UZ(58,"input",25),t.qZA(),t.TgZ(59,"div",9)(60,"label",10),t._uU(61," City "),t.qZA(),t._UZ(62,"input",26),t.qZA(),t.TgZ(63,"div",16)(64,"label",10),t._uU(65," State "),t.qZA(),t._UZ(66,"input",27),t.qZA(),t.TgZ(67,"div",16)(68,"label",10),t._uU(69," Country "),t.qZA(),t._UZ(70,"input",28),t.qZA(),t.TgZ(71,"div",16)(72,"label",10),t._uU(73," Pin Code "),t.qZA(),t._UZ(74,"input",29),t.qZA()(),t._UZ(75,"hr",21),t.TgZ(76,"div",8)(77,"div",19)(78,"div",8)(79,"div",30)(80,"div",31)(81,"label",32),t._uU(82,"Upload Logo"),t.qZA(),t.TgZ(83,"ngx-file-drop",33),t.NdJ("onFileDrop",function(d){return n.dropped(d)})("onFileOver",function(d){return n.fileOver(d)})("onFileLeave",function(d){return n.fileLeave(d)}),t.YNc(84,h,11,0,"ng-template",34),t.qZA()()(),t.TgZ(85,"div",35),t.YNc(86,f,1,1,"img",36),t.YNc(87,C,1,0,"ng-template",null,37,t.W1O),t.qZA()()()(),t.TgZ(89,"div",8)(90,"div",38)(91,"div",39)(92,"button",40),t.NdJ("click",function(){return n.reset()}),t._UZ(93,"i",41),t._uU(94," Reset "),t.qZA(),t.TgZ(95,"button",42),t.NdJ("click",function(){return n.submit()}),t._UZ(96,"i",43),t._uU(97),t.qZA()()()()()()(),t.TgZ(98,"div",44)(99,"div",45)(100,"div",46)(101,"h3"),t._uU(102,"Auto Increment List"),t.qZA()(),t.TgZ(103,"div",47)(104,"div",48)(105,"table",49)(106,"thead",50)(107,"tr",51)(108,"th",52),t._uU(109,"Sr. No."),t.qZA(),t.TgZ(110,"th",52),t._uU(111,"Module Name"),t.qZA(),t.TgZ(112,"th",52),t._uU(113,"Module"),t.qZA(),t.TgZ(114,"th",52),t._uU(115,"Module Prefix"),t.qZA(),t.TgZ(116,"th",52),t._uU(117,"Digit"),t.qZA(),t.TgZ(118,"th",52),t._uU(119,"Auto Increment Value"),t.qZA(),t.TgZ(120,"th",53),t._uU(121,"Action"),t.qZA()()(),t.TgZ(122,"tbody",54),t.YNc(123,S,21,16,"tr",55),t.qZA()()()()()()),2&o){const l=t.MAs(88);t.xp6(10),t.Q6J("formGroup",n.shopForm),t.xp6(76),t.Q6J("ngIf",n.fileContentImage)("ngIfElse",l),t.xp6(9),t.Tol(n.userId?"btn-warning":"btn-success"),t.xp6(1),t.Tol(n.userId?"fa-pen-to-square":"fa-plus"),t.xp6(1),t.hij(" ",n.userId?"Update":"Create"," "),t.xp6(26),t.Q6J("ngForOf",n.allData)}},dependencies:[i.sg,i.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.On,r.sg,r.u,r.x0,m.CB,m.L9],styles:[".table-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{min-height:10vh}"]})}return p})();var M=a(4086);const q=[{path:"",redirectTo:"shop-form",pathMatch:"full"},{path:"shop-form",component:w}];let O=(()=>{class p{static#t=this.\u0275fac=function(o){return new(o||p)};static#e=this.\u0275mod=t.oAB({type:p});static#o=this.\u0275inj=t.cJS({imports:[_.HK,v.ef,g.Bz.forChild(q),M.m,A.W]})}return p})()}}]);