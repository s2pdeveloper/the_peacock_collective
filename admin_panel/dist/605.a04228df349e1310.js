"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[605],{4495:(k,I,l)=>{l.d(I,{s:()=>w});var h=l(9862),t=l(3997),v=l(7398),f=l(8645),V=l(4552);class Z extends f.x{constructor(p=1/0,o=1/0,a=V.l){super(),this._bufferSize=p,this._windowTime=o,this._timestampProvider=a,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=o===1/0,this._bufferSize=Math.max(1,p),this._windowTime=Math.max(1,o)}next(p){const{isStopped:o,_buffer:a,_infiniteTimeWindow:d,_timestampProvider:g,_windowTime:_}=this;o||(a.push(p),!d&&a.push(g.now()+_)),this._trimBuffer(),super.next(p)}_subscribe(p){this._throwIfClosed(),this._trimBuffer();const o=this._innerSubscribe(p),{_infiniteTimeWindow:a,_buffer:d}=this,g=d.slice();for(let _=0;_<g.length&&!p.closed;_+=a?1:2)p.next(g[_]);return this._checkFinalizedStatuses(p),o}_trimBuffer(){const{_bufferSize:p,_timestampProvider:o,_buffer:a,_infiniteTimeWindow:d}=this,g=(d?1:2)*p;if(p<1/0&&g<a.length&&a.splice(0,a.length-g),!d){const _=o.now();let A=0;for(let b=1;b<a.length&&a[b]<=_;b+=2)A=b;A&&a.splice(0,A+1)}}}var x=l(3020);function T(m,p,o){let a,d=!1;return m&&"object"==typeof m?({bufferSize:a=1/0,windowTime:p=1/0,refCount:d=!1,scheduler:o}=m):a=m??1/0,(0,x.B)({connector:()=>new Z(a,p,o),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}var U=l(5879);let w=(()=>{class m{constructor(o){this.httpClient=o,this.options={headers:(new h.WM).set("Content-Type","application/json")}}private(){return`${location.protocol}//${location.hostname+(location.port?":"+location.port:"")}/`}get(o,a=new h.LE){return(0,t.x)(),this.httpClient.get(o,{params:a}).pipe((0,v.U)(d=>d.result),T())}put(o,a={}){return(0,t.x)(),this.httpClient.put(o,a).pipe((0,v.U)(d=>d.result))}post(o,a={}){return(0,t.x)(),this.httpClient.post(o,a).pipe((0,v.U)(d=>d.result))}delete(o){return(0,t.x)(),this.httpClient.delete(o).pipe((0,v.U)(a=>a.result),T())}getFile(o,a=new h.LE){return this.httpClient.get(o,{responseType:"blob",headers:(new h.WM).append("Content-Type","application/json")})}getIp(){return(0,t.x)(),this.httpClient.get("https://ipapi.co/json/").pipe(T())}static#t=this.\u0275fac=function(a){return new(a||m)(U.LFG(h.eN))};static#e=this.\u0275prov=U.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},6605:(k,I,l)=>{l.r(I),l.d(I,{VariantsModule:()=>D});var h=l(6814),t=l(5879),v=l(7285),f=l(1076),V=l(6411),Z=l(4087),x=l(485);function T(n,c){if(1&n&&(t.ynx(0),t._uU(1),t._UZ(2,"i",23),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name)+" | "," "),t.xp6(1),t.Udp("color",e.value)}}function U(n,c){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name)+" | "+e.value," ")}}function w(n,c){if(1&n&&(t.TgZ(0,"p"),t.YNc(1,T,3,3,"ng-container",22),t.YNc(2,U,2,1,"ng-container",22),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("ngIf","color"==(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name)),t.xp6(1),t.Q6J("ngIf","color"!=(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.name))}}function m(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.dismiss("Cross click"))}),t.qZA()(),t.TgZ(2,"div",26)(3,"h4",27),t._uU(4," Are you sure you want to Delete ? "),t.qZA()(),t.TgZ(5,"div",28)(6,"button",29),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw(2);return u.deleteVariant(u.selectedRow),t.KtG(s.dismiss("Cross click"))}),t._uU(7," YES "),t.qZA(),t.TgZ(8,"button",30),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.dismiss("Cross click"))}),t._uU(9," NO "),t.qZA()()}}function p(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td",12),t.YNc(4,w,3,2,"p",11),t.qZA(),t.TgZ(5,"td",13),t._uU(6),t.qZA(),t.TgZ(7,"td",12),t._uU(8),t.qZA(),t.TgZ(9,"td",12),t._uU(10),t.qZA(),t.TgZ(11,"td",14)(12,"button",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.navigateTo("/default/variant/variant-images",s.id))}),t._UZ(13,"i",16),t.qZA(),t.TgZ(14,"button",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.update(s))}),t._UZ(15,"i",18),t.qZA(),t.TgZ(16,"button",19),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.MAs(19),y=t.oxw();return t.KtG(y.open(s,u))}),t._UZ(17,"i",20),t.qZA()(),t.YNc(18,m,10,0,"ng-template",null,21,t.W1O),t.qZA()}if(2&n){const e=c.$implicit,i=c.index,r=t.oxw();t.xp6(2),t.Oqu(r.pageSize*(r.page-1)+(i+1)),t.xp6(2),t.Q6J("ngForOf",e.variantWithAttrVariantMap),t.xp6(2),t.Oqu(null==e?null:e.sku),t.xp6(2),t.hij(" ",null==e?null:e.qty," "),t.xp6(2),t.hij(" ",null==e?null:e.price," ")}}let o=(()=>{class n{constructor(e,i,r,s,u){this.router=e,this.variantService=i,this.activated=r,this.spinner=s,this.toastService=u,this.modalService=(0,t.f3M)(v.FF),this.attributeList=[],this.page=1,this.pageSize=25,this.collection=0,this.variantList=[],this.customEvent=new t.vpe}ngOnInit(){this.attributeList=this.variantList.map(e=>e),console.log("this.attributeList",this.attributeList)}navigateTo(e,i){i?this.router.navigate([e],{queryParams:{id:i}}):this.router.navigate([e])}update(e){this.customEvent.emit({action:"EDIT",data:e})}open(e,i){this.selectedRow=e,this.modalService.open(i,{centered:!0})}deleteVariant(e){this.customEvent.emit({action:"DELETE",data:e})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f.F0),t.Y36(V.H),t.Y36(f.gz),t.Y36(Z.V),t.Y36(x.k))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-variant-list"]],inputs:{variantList:"variantList"},outputs:{customEvent:"customEvent"},decls:21,vars:1,consts:[[1,"table-container"],[1,"card","table-card"],[1,"card-body","p-3"],[1,"table-responsive"],[1,"table","table-hover","table-bordered"],[1,"thead"],[1,"table-secondary"],["scope","col"],["scope","col",1,"text-start"],["scope","col",1,"mx-auto","text-center"],[1,"tbody","mt-3"],[4,"ngFor","ngForOf"],["scope","row"],["scope","row",1,"text-start"],["scope","row",1,"text-center"],["ngbTooltip","Images",1,"btn","action-btn","btn-sm","mx-2",3,"click"],[1,"fa-solid","fa-image"],["ngbTooltip","Edit",1,"btn","btn-sm","action-btn","mx-2",3,"click"],[1,"ti","ti-edit-circle"],["ngbTooltip","Delete",1,"btn","btn-sm","action-btn",3,"click"],[1,"ti","ti-trash"],["deleteModal",""],[4,"ngIf"],[1,"fa-solid","fa-square"],[1,"modal-header","border-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","border-0"],["id","modal-basic-title",1,"modal-title","text-center"],[1,"modal-footer","justify-content-center","border-0"],["type","button",1,"btn","px-4","btn-outline-danger",3,"click"],["type","button",1,"btn","px-4","btn-outline-primary",3,"click"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5)(6,"tr",6)(7,"th",7),t._uU(8,"Sr. No."),t.qZA(),t.TgZ(9,"th",7),t._uU(10,"Attribute"),t.qZA(),t.TgZ(11,"th",8),t._uU(12,"SKU"),t.qZA(),t.TgZ(13,"th",7),t._uU(14,"QTY"),t.qZA(),t.TgZ(15,"th",7),t._uU(16,"Price"),t.qZA(),t.TgZ(17,"th",9),t._uU(18,"Action"),t.qZA()()(),t.TgZ(19,"tbody",10),t.YNc(20,p,20,5,"tr",11),t.qZA()()()()()()),2&i&&(t.xp6(20),t.Q6J("ngForOf",r.variantList))},dependencies:[h.sg,h.O5]})}return n})();var a=l(95),d=l(7942),g=l(4807);const _=function(n){return{color:n}};function A(n,c){1&n&&t._UZ(0,"i",28),2&n&&t.Q6J("ngStyle",t.VKq(1,_,c.item))}function b(n,c){if(1&n&&(t._UZ(0,"i",28),t.TgZ(1,"span",29),t._uU(2),t.qZA()),2&n){const e=c.item;t.Q6J("ngStyle",t.VKq(2,_,e)),t.xp6(2),t.Oqu(e)}}const F=function(){return{standalone:!0}};function M(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ng-select",25),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.selectedValue=r)}),t.YNc(2,A,1,3,"ng-template",26),t.YNc(3,b,3,4,"ng-template",27),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.MGl("placeholder","Select ",e.name,""),t.Q6J("items",e.attributes)("ngModel",e.selectedValue)("ngModelOptions",t.DdM(4,F))}}function S(n,c){1&n&&t._uU(0),2&n&&t.hij(" ",c.item," ")}function L(n,c){1&n&&t._uU(0),2&n&&t.hij(" ",c.item," ")}function N(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ng-select",25),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.selectedValue=r)}),t.YNc(2,S,1,1,"ng-template",26),t.YNc(3,L,1,1,"ng-template",27),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.MGl("placeholder","Select ",e.name,""),t.Q6J("items",e.attributes)("ngModel",e.selectedValue)("ngModelOptions",t.DdM(4,F))}}function q(n,c){if(1&n&&(t.TgZ(0,"div",23)(1,"label",9),t._uU(2),t.qZA(),t.YNc(3,M,4,5,"ng-container",24),t.YNc(4,N,4,5,"ng-container",24),t.qZA()),2&n){const e=c.$implicit;t.xp6(2),t.hij("Select ",e.label,""),t.xp6(1),t.Q6J("ngIf","color"==(null==e?null:e.label)),t.xp6(1),t.Q6J("ngIf","color"!=(null==e?null:e.label))}}function J(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.create())}),t._UZ(1,"i",31),t._uU(2," Create "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Tol(null!=e.variantForm.value.id?"fa-pen-to-square":"fa-plus")}}function Y(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.update())}),t._UZ(1,"i",33),t._uU(2," Update "),t.qZA()}}let E=(()=>{class n{constructor(e,i,r,s,u,y,G){this.router=e,this.activated=i,this.toastService=r,this.spinner=s,this.variantsService=u,this.productService=y,this.fb=G,this.options=[],this.productId=null,this.selectedAttr=[],this.variantList=[],this.attributes=[],this.isEdit=!1,this.variantForm=this.fb.group({id:new a.NI(null),sku:new a.NI(null,[a.kI.required]),price:new a.NI(null),qty:new a.NI(null),productId:new a.NI(null)})}get f(){return this.variantForm.controls}ngOnInit(){this.activated.queryParams.subscribe(e=>{e.id&&(this.getProductAttribute(e.id),this.f.productId.setValue(Number(e.id)),this.productId=e.id,this.getAll())})}getProductAttribute(e){this.spinner.show(),this.productService.getById(e).subscribe(i=>{if(console.log("success",i),i?.productWithProdAttributeMap&&i?.productWithProdAttributeMap.length)for(const r of i?.productWithProdAttributeMap)this.attributes.push({label:r?.ProdAttributeMapWithAttributes?.name,attrId:r.attributeId,attributes:r?.ProdAttributeMapWithAttributes.value.map(s=>s.value),selectedValue:null});console.log("this.attributes",this.attributes),this.spinner.hide()})}getAll(){this.spinner.show(),this.variantsService.getByProductId(this.productId).subscribe(e=>{console.log("success,",e),this.variantList=e,console.log("this.variantList",this.variantList),this.spinner.hide()})}createPayload(){let e=this.variantForm.value;return e.attributeArr=this.attributes.map(i=>({value:i.selectedValue,attrId:i.attrId,label:i.label})),e}checkDuplicateAttrVariant(){for(const e of this.variantList)if(e.sku.toLowerCase()==this.variantForm.value.sku.toLowerCase())return this.toastService.error("duplicate sku"),!0;return!1}create(){let e=this.createPayload();this.checkDuplicateAttrVariant()||(this.spinner.show(),this.variantsService.create(e).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.reset(),this.getAll()}))}update(){let e=this.createPayload();this.spinner.show(),this.variantsService.update(e.id,e).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.getAll(),this.reset()})}getDataById(e){this.spinner.show(),this.variantsService.getById(e).subscribe(i=>{this.variantForm.patchValue(i),this.spinner.hide()})}delete(e){this.spinner.show(),this.variantsService.delete(e).subscribe(i=>{this.getAll(),this.spinner.hide()})}back(){this.router.navigate(["default/product/product-list"])}reset(){this.attributes=this.attributes.map(e=>(e.selectedValue=null,e)),this.f.price.setValue(null),this.f.sku.setValue(null),this.f.qty.setValue(null),this.f.id.setValue(null)}openUrl(e){window.open(e,"_blank")}variantEvent(e){switch(e.action){case"EDIT":if(e.data.id)for(const i of e.data.variantWithAttrVariantMap)for(let r of this.attributes)if(r.attrId==i.attributeId){r.selectedValue=i.value;break}this.variantForm.patchValue(e.data);break;case"DELETE":this.delete(e.data.id)}}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f.F0),t.Y36(f.gz),t.Y36(x.k),t.Y36(Z.V),t.Y36(V.H),t.Y36(d.M),t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-variant-form"]],decls:43,vars:6,consts:[[1,"card","form-card"],[1,"card-header"],[1,"card-header-items"],[1,"back-btn","btn","btn-primary",3,"click"],[1,"ti","ti-arrow-left","me-1"],[1,"card-body","justify-content-center"],[3,"formGroup"],[1,"row"],[1,"col-md-4","mb-2"],[1,"form-label"],[1,"text-danger"],["formControlName","sku","type","text",1,"form-control"],["formControlName","price","type","number",1,"form-control"],["formControlName","qty","type","number",1,"form-control"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-12","my-3"],[1,"col-12"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","px-5","btn-primary","mx-2","shadow","rounded","rounded-3","d-flex","align-items-center",3,"click"],[1,"fa-solid","fa-arrows-rotate","me-2"],["type","submit","class","btn px-5 btn-success shadow rounded rounded-3 mx-2 d-flex align-items-center",3,"click",4,"ngIf"],["class","btn px-5 btn-warning shadow rounded rounded-3 mx-2 d-flex align-items-center",3,"click",4,"ngIf"],[3,"variantList","customEvent"],[1,"col-md-4","mb-3"],[4,"ngIf"],[3,"items","placeholder","ngModel","ngModelOptions","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"fa-solid","fa-square","mx-1",3,"ngStyle"],[1,"ms-2"],["type","submit",1,"btn","px-5","btn-success","shadow","rounded","rounded-3","mx-2","d-flex","align-items-center",3,"click"],[1,"fa-solid","me-2"],[1,"btn","px-5","btn-warning","shadow","rounded","rounded-3","mx-2","d-flex","align-items-center",3,"click"],[1,"fa-pen-to-square","fa-solid","me-2"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),t._uU(4),t.qZA(),t.TgZ(5,"div")(6,"a",3),t.NdJ("click",function(){return r.back()}),t._UZ(7,"i",4),t._uU(8," Back"),t.qZA()()()(),t.TgZ(9,"div",5)(10,"form",6)(11,"div",7)(12,"div",8)(13,"label",9),t._uU(14," SKU "),t.TgZ(15,"span",10),t._uU(16,"*"),t.qZA()(),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"div",8)(19,"label",9),t._uU(20," Price "),t.TgZ(21,"span",10),t._uU(22,"*"),t.qZA()(),t._UZ(23,"input",12),t.qZA(),t.TgZ(24,"div",8)(25,"label",9),t._uU(26," Qty "),t.TgZ(27,"span",10),t._uU(28,"*"),t.qZA()(),t._UZ(29,"input",13),t.qZA(),t.YNc(30,q,5,3,"div",14),t.TgZ(31,"div",15)(32,"div",7)(33,"div",16)(34,"div",17)(35,"button",18),t.NdJ("click",function(){return r.reset()}),t._UZ(36,"i",19),t._uU(37," Reset "),t.qZA(),t.YNc(38,J,3,2,"button",20),t.YNc(39,Y,3,0,"button",21),t.qZA()()()()(),t.TgZ(40,"div",7)(41,"div",16)(42,"app-variant-list",22),t.NdJ("customEvent",function(u){return r.variantEvent(u)}),t.qZA()()()()()()),2&i&&(t.xp6(4),t.hij("",r.variantForm.value.id?"Update":"Create"," Variant"),t.xp6(6),t.Q6J("formGroup",r.variantForm),t.xp6(20),t.Q6J("ngForOf",r.attributes),t.xp6(8),t.Q6J("ngIf",!r.variantForm.value.id),t.xp6(1),t.Q6J("ngIf",r.variantForm.value.id),t.xp6(3),t.Q6J("variantList",r.variantList))},dependencies:[h.sg,h.O5,h.PC,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.On,a.sg,a.u,g.w9,g.ir,g.mR,o]})}return n})();var B=l(7741),C=l(7398),Q=l(4495);let P=(()=>{class n{constructor(e){this.http=e,this.BASE_URL="variantImages"}getAll(e){return this.http.get(this.BASE_URL,e)}create(e){return this.http.post(this.BASE_URL,e).pipe((0,C.U)(i=>i))}update(e,i){return this.http.put(this.BASE_URL+"/"+e,i).pipe((0,C.U)(r=>r))}delete(e){return this.http.delete(this.BASE_URL+"/"+e).pipe((0,C.U)(i=>i))}getById(e){return this.http.get(this.BASE_URL+"/"+e).pipe((0,C.U)(i=>i))}getByVariantId(e){return this.http.get(this.BASE_URL+"/getByVariantId/"+e).pipe((0,C.U)(i=>i))}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(Q.s))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j=l(6593);function W(n,c){if(1&n&&(t.TgZ(0,"div",8),t._UZ(1,"img",23),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.url,t.LSH)}}function O(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",24),t._UZ(1,"img",25),t.TgZ(2,"button",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.deleteImg(s.id))}),t._UZ(3,"i",27),t.qZA()()}if(2&n){const e=c.$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH)}}const $=[{path:"",redirectTo:"variant-list",pathMatch:"full"},{path:"variant-list",component:o},{path:"variant-form",component:E},{path:"variant-images",component:(()=>{class n{constructor(e,i,r,s,u,y){this.router=e,this.activated=i,this.variantImageService=r,this.toastService=s,this.spinner=u,this.domSanitizer=y,this.fileName="",this.url=null,this.file=null,this.options=[],this.imageArr=[],this.imageForm=new a.cw({id:new a.NI(null),image:new a.NI(null),variantId:new a.NI(null)})}get f(){return this.imageForm.controls}ngOnInit(){this.activated.queryParams.subscribe(e=>{e.id&&(this.getByProductId(e.id),this.variantId=e.id,this.f.variantId.setValue(e.id))})}getByProductId(e){this.spinner.show(),this.variantImageService.getByVariantId(e).subscribe(i=>{this.imageArr=i,this.spinner.hide()})}submit(){let e=new FormData;for(const i in this.imageForm.value)"image"!=i&&e.append(i,this.imageForm.value[i]);this.file&&e.append("image",this.file,this.file.name),this.imageForm.value.id?this.update(this.imageForm.value.id,e):(e.delete("id"),this.create(e))}create(e){this.spinner.show(),this.variantImageService.create(e).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.url=null,this.getByProductId(this.variantId)})}update(e,i){this.spinner.show(),this.variantImageService.update(e,i).subscribe(r=>{this.spinner.hide(),this.toastService.success(r.message)})}getDataById(e){this.spinner.show(),this.variantImageService.getById(e).subscribe(i=>{this.url=i.image,this.imageForm.patchValue(i),this.spinner.hide()})}deleteImg(e){console.log(e),this.spinner.show(),this.variantImageService.delete(e).subscribe(i=>{this.toastService.warning(i?.message),this.spinner.hide(),this.getByProductId(this.variantId)})}fileChosen(e){if(console.log("event.target.files",e),e.target.files.length){if(e.target.files[0].size>2e6)return void this.toastService.warning("Unable to upload file of size more than 1MB");this.file=e.target.files[0],this.fileName=this.file.name;const r=new FileReader;r.readAsDataURL(this.file),r.onload=()=>{this.url=this.domSanitizer.bypassSecurityTrustUrl(r.result)},r.onerror=s=>{console.error(s)}}}navigateTo(){this.router.navigate(["default/product/product-list"])}reset(){this.imageForm.reset(),this.variantId&&this.getDataById(this.variantId)}openUrl(e){window.open(e,"_blank")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f.F0),t.Y36(f.gz),t.Y36(P),t.Y36(x.k),t.Y36(Z.V),t.Y36(j.H7))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-variant-images"]],decls:37,vars:5,consts:[[1,"card","form-card"],[1,"card-header"],[1,"card-header-items"],[1,"back-btn","btn","btn-primary",3,"click"],[1,"ti","ti-arrow-left","me-1"],[1,"card-body","mt-3","justify-content-center"],[3,"formGroup"],[1,"row","px-2"],[1,"col-md-4","ps-0","mb-3"],[1,"form-label"],[1,"text-danger"],[1,"d-flex"],["for","file",1,"file-upload-label"],[1,"file-upload-design"],["viewBox","0 0 640 512","height","1em"],["d","M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"],[1,"browse-button"],["id","file","accept",".png, .jpg, .jpeg","type","file",3,"multiple","change"],[1,"mt-3"],["type","submit",1,"btn","px-5","btn-primary","mx-2","shadow","rounded","rounded-3","d-flex","align-items-center",3,"disabled","click"],["class","col-md-4 ps-0 mb-3 ",4,"ngIf"],[1,"row"],["class","col-3 mb-3 image",4,"ngFor","ngForOf"],["alt","image",1,"w-100","new-img",3,"src"],[1,"col-3","mb-3","image"],["alt","image",1,"w-100","all-img",3,"src"],[1,"btn","btn-outline-danger","cross-btn",3,"click"],[1,"fa-solid","fa-xmark"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),t._uU(4,"Variant Images"),t.qZA(),t.TgZ(5,"div")(6,"a",3),t.NdJ("click",function(){return r.navigateTo()}),t._UZ(7,"i",4),t._uU(8," Back"),t.qZA()()()(),t.TgZ(9,"div",5)(10,"form",6)(11,"div",7)(12,"div",8)(13,"div")(14,"label",9),t._uU(15," Variant Images "),t.TgZ(16,"span",10),t._uU(17,"*"),t.qZA()()(),t.TgZ(18,"div",11)(19,"label",12)(20,"div",13),t.O4$(),t.TgZ(21,"svg",14),t._UZ(22,"path",15),t.qZA(),t.kcU(),t.TgZ(23,"p"),t._uU(24,"Drag and Drop"),t.qZA(),t.TgZ(25,"p"),t._uU(26,"or"),t.qZA(),t.TgZ(27,"span",16),t._uU(28,"Browse file"),t.qZA()(),t.TgZ(29,"input",17),t.NdJ("change",function(u){return r.fileChosen(u)}),t.qZA()()(),t.TgZ(30,"div",18)(31,"button",19),t.NdJ("click",function(){return r.submit()}),t._uU(32," Add "),t.qZA()()(),t.YNc(33,W,2,1,"div",20),t.qZA()(),t._UZ(34,"hr"),t.TgZ(35,"div",21),t.YNc(36,O,4,1,"div",22),t.qZA()()()),2&i&&(t.xp6(10),t.Q6J("formGroup",r.imageForm),t.xp6(19),t.Q6J("multiple",!1),t.xp6(2),t.Q6J("disabled",!r.url),t.xp6(2),t.Q6J("ngIf",r.url),t.xp6(3),t.Q6J("ngForOf",r.imageArr))},dependencies:[h.sg,h.O5,a._Y,a.JL,a.sg],styles:[".cross-btn[_ngcontent-%COMP%]{width:25px;height:25px;padding:0;display:flex;justify-content:center;align-items:center;position:absolute;top:5%;right:5%}.new-img[_ngcontent-%COMP%]{height:300px;width:300px!important;object-fit:cover}"]})}return n})()}];let D=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[h.ez,f.Bz.forChild($),B.W,a.u5,a.UX,g.A0]})}return n})()}}]);