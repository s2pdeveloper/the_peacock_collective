"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[661],{4495:(T,f,a)=>{a.d(f,{s:()=>A});var h=a(9862),t=a(3997),g=a(7398),C=a(8645),v=a(4552);class y extends C.x{constructor(l=1/0,s=1/0,i=v.l){super(),this._bufferSize=l,this._windowTime=s,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=s===1/0,this._bufferSize=Math.max(1,l),this._windowTime=Math.max(1,s)}next(l){const{isStopped:s,_buffer:i,_infiniteTimeWindow:c,_timestampProvider:e,_windowTime:o}=this;s||(i.push(l),!c&&i.push(e.now()+o)),this._trimBuffer(),super.next(l)}_subscribe(l){this._throwIfClosed(),this._trimBuffer();const s=this._innerSubscribe(l),{_infiniteTimeWindow:i,_buffer:c}=this,e=c.slice();for(let o=0;o<e.length&&!l.closed;o+=i?1:2)l.next(e[o]);return this._checkFinalizedStatuses(l),s}_trimBuffer(){const{_bufferSize:l,_timestampProvider:s,_buffer:i,_infiniteTimeWindow:c}=this,e=(c?1:2)*l;if(l<1/0&&e<i.length&&i.splice(0,i.length-e),!c){const o=s.now();let n=0;for(let r=1;r<i.length&&i[r]<=o;r+=2)n=r;n&&i.splice(0,n+1)}}}var _=a(3020);function u(p,l,s){let i,c=!1;return p&&"object"==typeof p?({bufferSize:i=1/0,windowTime:l=1/0,refCount:c=!1,scheduler:s}=p):i=p??1/0,(0,_.B)({connector:()=>new y(i,l,s),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}var m=a(5879);let A=(()=>{class p{constructor(s){this.httpClient=s,this.options={headers:(new h.WM).set("Content-Type","application/json")}}private(){return`${location.protocol}//${location.hostname+(location.port?":"+location.port:"")}/`}get(s,i=new h.LE){return(0,t.x)(),this.httpClient.get(s,{params:i}).pipe((0,g.U)(c=>c.result),u())}put(s,i={}){return(0,t.x)(),this.httpClient.put(s,i).pipe((0,g.U)(c=>c.result))}post(s,i={}){return(0,t.x)(),this.httpClient.post(s,i).pipe((0,g.U)(c=>c.result))}delete(s){return(0,t.x)(),this.httpClient.delete(s).pipe((0,g.U)(i=>i.result),u())}getFile(s,i=new h.LE){return this.httpClient.get(s,{responseType:"blob",headers:(new h.WM).append("Content-Type","application/json")})}getIp(){return(0,t.x)(),this.httpClient.get("https://ipapi.co/json/").pipe(u())}static#t=this.\u0275fac=function(i){return new(i||p)(m.LFG(h.eN))};static#e=this.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},1290:(T,f,a)=>{a.r(f),a.d(f,{AllProductVariantsModule:()=>s});var h=a(6814),t=a(5879),g=a(1076),C=a(6411),v=a(485),y=a(8672),_=a(7741),u=a(95);const m=function(){return{standalone:!0}};function A(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",27),t._uU(2),t.qZA(),t.TgZ(3,"td",28),t._uU(4),t.qZA(),t.TgZ(5,"td",29),t._uU(6),t.qZA(),t.TgZ(7,"td",27)(8,"div",30)(9,"button",31),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return r.addQty=r.addQty-1,t.KtG(r.edit=!0)}),t._UZ(10,"i",32),t.qZA(),t.TgZ(11,"input",33),t.NdJ("ngModelChange",function(n){const d=t.CHM(e).$implicit;return t.KtG(d.addQty=n)})("change",function(){const r=t.CHM(e).$implicit;return t.KtG(r.edit=!0)}),t.qZA(),t.TgZ(12,"button",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return r.addQty=r.addQty+1,t.KtG(r.edit=!0)}),t._UZ(13,"i",35),t.qZA()()(),t.TgZ(14,"td",36)(15,"div",37)(16,"input",33),t.NdJ("ngModelChange",function(n){const d=t.CHM(e).$implicit;return t.KtG(d.price=n)})("change",function(){const r=t.CHM(e).$implicit;return t.KtG(r.edit=!0)}),t.qZA()()(),t.TgZ(17,"td",36)(18,"button",38),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.update(r))}),t._UZ(19,"i",14),t.qZA()()()}if(2&i){const e=c.$implicit,o=c.index,n=t.oxw();t.xp6(2),t.Oqu(n.pageSize*(n.page-1)+(o+1)),t.xp6(2),t.Oqu(null==e?null:e.sku),t.xp6(2),t.Oqu(null==e?null:e.qty),t.xp6(3),t.Q6J("disabled",e.addQty<=0),t.xp6(2),t.Q6J("ngModel",e.addQty)("ngModelOptions",t.DdM(8,m)),t.xp6(5),t.Q6J("ngModel",e.price)("ngModelOptions",t.DdM(9,m))}}const l=[{path:"",pathMatch:"full",redirectTo:"all"},{path:"all",component:(()=>{class i{constructor(e,o,n,r){this.router=e,this.variantService=o,this.toastService=n,this.spinner=r,this.variants=[],this.page=1,this.pageSize=10,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.addQty=0}ngOnInit(){this.getAllProductVariant()}navigateTo(e,o){o?this.router.navigate([e],{queryParams:{id:o}}):this.router.navigate([e])}update(e){console.log("data",e);let o={price:e.price,qty:e.qty+e.addQty};console.log("payload",o),this.spinner.show(),this.variantService.update(e.id,o).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.getAllProductVariant()})}updateAll(){let e=!1,o=this.variants.filter(n=>n?.edit).map(n=>(isNaN(n.addQty)&&(e=!0),{id:n.id,price:n.price,qty:isNaN(n.addQty)?n.qty:n.qty+n.addQty}));e?this.toastService.warning("Qty is Not a Number"):(this.spinner.show(),this.variantService.updateAll(o).subscribe(n=>{this.spinner.hide(),this.getAllProductVariant(),this.toastService.success(n.message)}))}getAllProductVariant(){this.spinner.show(),this.variantService.getAllProductVariant({page:this.page,pageSize:this.pageSize,search:this.search}).subscribe(o=>{this.spinner.hide(),this.variants=o?.rows,this.collection=o?.count})}onChangePage(e){e>0&&(this.page=e),this.getAllProductVariant()}searchFn(){(this.search.toString().length>=3||0==this.search.toString().length)&&this.getAllProductVariant()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(g.F0),t.Y36(C.H),t.Y36(v.k),t.Y36(y.t2))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-all-product-variants"]],decls:38,vars:5,consts:[[1,"table-container"],[1,"card","table-card"],[1,"card-title"],[1,"card-header"],[1,"row","justify-content-between"],[1,"col-4"],[1,"input-icons"],[1,"input-group","input-group-sm"],["type","search","aria-label","Small","placeholder","Search","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"input-group-append"],["id","inputGroup-sizing-sm",1,"input-group-text","h-100"],[1,"ti","ti-search"],[1,"d-flex","col-auto","justify-content-end"],["ngbTooltip","Edit",1,"btn","btn-primary","action-btn","mx-3",3,"click"],[1,"ti","ti-edit-circle"],[1,"card-body","p-3"],[1,"table-responsive"],[1,"table","table-hover","table-bordered"],[1,"thead"],[1,"table-secondary"],["scope","col"],["scope","col",1,"text-start"],["scope","col",1,"text-end"],["scope","col",1,"mx-auto","text-center"],[1,"tbody","mt-3"],[4,"ngFor","ngForOf"],[3,"page","pageSize","collection","pageChange","pageSizeChange","collectionChange","myOutput"],["scope","row"],["scope","row",1,"text-start"],["scope","row",1,"text-end"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","btn-sm","btn-outline-none","py-0","border-0",3,"disabled","click"],["aria-hidden","true",1,"fa-solid","fs-3","fa-minus-square","text-primary","fa-5x","mx-0"],["type","number",1,"form-control","w-25",3,"ngModel","ngModelOptions","ngModelChange","change"],[1,"btn","btn-sm","btn-outline-none","py-0","border-0",3,"click"],["aria-hidden","true",1,"fa-solid","fs-3","fa-plus-square","text-primary","fa-5x","mx-0"],["scope","row",1,"text-center"],[1,"d-flex","justify-content-center"],["ngbTooltip","Edit",1,"btn","btn-sm","action-btn","mx-2",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4,"All Variants List"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"input",8),t.NdJ("ngModelChange",function(d){return n.search=d})("input",function(){return n.searchFn()}),t.qZA(),t.TgZ(11,"div",9)(12,"span",10),t._UZ(13,"i",11),t.qZA()()()()(),t.TgZ(14,"div",12)(15,"button",13),t.NdJ("click",function(){return n.updateAll()}),t._UZ(16,"i",14),t._uU(17," Update "),t.qZA()()()(),t.TgZ(18,"div",15)(19,"div",16)(20,"table",17)(21,"thead",18)(22,"tr",19)(23,"th",20),t._uU(24,"Sr. No."),t.qZA(),t.TgZ(25,"th",21),t._uU(26,"SKU"),t.qZA(),t.TgZ(27,"th",22),t._uU(28,"QTY"),t.qZA(),t.TgZ(29,"th",20),t._uU(30,"Add QTY"),t.qZA(),t.TgZ(31,"th",20),t._uU(32,"Price"),t.qZA(),t.TgZ(33,"th",23),t._uU(34,"Action"),t.qZA()()(),t.TgZ(35,"tbody",24),t.YNc(36,A,20,10,"tr",25),t.qZA()()(),t.TgZ(37,"app-custom-pagination",26),t.NdJ("pageChange",function(d){return n.page=d})("pageSizeChange",function(d){return n.pageSize=d})("collectionChange",function(d){return n.collection=d})("myOutput",function(){return n.onChangePage(n.page)}),t.qZA()()()()),2&o&&(t.xp6(10),t.Q6J("ngModel",n.search),t.xp6(26),t.Q6J("ngForOf",n.variants),t.xp6(1),t.Q6J("page",n.page)("pageSize",n.pageSize)("collection",n.collection))},dependencies:[h.sg,_.W,u.Fj,u.wV,u.JJ,u.On]})}return i})()}];let s=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[h.ez,_.W,g.Bz.forChild(l),u.UX,u.u5]})}return i})()}}]);