<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-11">
      <p class="py-3 text-color-primary pointer">
        <span (click)="navigateTo('/')">Home</span> /
        <span>Checkout</span>
      </p>
    </div>
    <div class="col-11">
      <h1 class="p-4 regular-weight">Checkout</h1>
    </div>
    <div class="col-11">
      <div class="row">
        <div class="col-12 col-md-12 col-lg-8">
          <div [ngClass]="collapsed ? 'info-collapsed' : 'info'" class="row px-3 address-info">
            <div class="col-12 border">
              <div class="p-4 border-bottom">
                <p class="fw-bold">1 Addresses</p>
              </div>
              <div [ngClass]="collapsed ? 'd-none' : 'd-block'" class="p-3">
                <div class="row justify-content-around">
                  <div *ngFor="let add of allAddresses; let i = index"
                    class="col-10 col-md-4 col-lg-5 card position-relative p-4">
                    <div class="row">
                      <div class="col-12">
                        <div class="d-flex mb-3 align-items-center">
                          <p>{{ add?.name }}</p>
                          <span class="bg-light small-text text-muted p-1 ms-2">{{ add.type }}</span>
                        </div>
                        <p class="mb-3">
                          {{ add?.location }}
                        </p>
                        <p>{{ add?.phone }}</p>
                      </div>
                      <div class="badge pointer">
                        <span><input type="radio" [(ngModel)]="this.selectedAddressId" name="address"
                            [value]="add.id" /></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div [ngClass]="collapsed ? 'd-none' : 'd-block'" class="p-4 pt-1">
                <div class="row justify-content-center">
                  <div class="col-12">
                    <button class="btn btn-dark py-3" [disabled]="!product.length" (click)="continue()">
                      Continue
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div [ngClass]="collapsedPayment ? 'info-collapsed' : 'info'" class="row px-3 payment-info">
            <div class="col-12 border">
              <div class="p-4 border-bottom">
                <p class="fw-bold">2 Payment</p>
              </div>
              <div [ngClass]="collapsedPayment ? 'd-none' : 'd-block'" class="px-4 py-3">
                <div class="row align-items-center px-4 py-3">
                  <div class="col-1">
                    <input type="radio" value="cod" [(ngModel)]="payment" name="payment" id="cod" />
                  </div>
                  <div class="col-11">
                    <label for="cod">COD</label>
                  </div>
                </div>
                <div class="row align-items-center px-4 py-3">
                  <div class="col-1">
                    <input type="radio" value="card"  [(ngModel)]="payment" name="payment" id="card" />
                  </div>
                  <div class="col-11">
                    <label for="card">CARD</label>
                  </div>
                </div>
              </div>
              
              <div [ngClass]="collapsedPayment ? 'd-none' : 'd-block'" class="p-4 pt-1">
                <div class="row justify-content-center">
                  <div class="col-12">
                    <div class="card-container" *ngIf="payment == 'card'">
                      <app-strive (stripeEvent)="stripePay($event)"></app-strive>
                  </div>
                    <button *ngIf="payment != 'card'" class="btn btn-dark py-3 mt-3" (click)="createOrder()">
                      Place Order
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-12 col-lg-4">
          <div class="card rounded-0">
            <div class="p-3">
              <div class="row py-3 justify-content-between">
                <div class="col-4">
                  <h5 class="regular-font">
                    {{ product.length }}
                    {{ product.length > 1 ? "items" : "item" }}
                  </h5>
                </div>
                <div class="col-4 d-flex justify-content-end">
                  <h5 class="small-text">
                    show details
                    <i class="fa-solid fa-chevron-down ms-1 pointer" (click)="collapsedDetails = !collapsedDetails"></i>
                  </h5>
                </div>
              </div>
              <div *ngIf="!collapsedDetails">
                <div *ngFor="let d of product" class="row justify-content-between">
                  <div class="col-3 p-3 pb-0">
                    <img (click)="navigateTo('/product/product-details')" class="img-fluid"
                      [src]="d?.variant?.variantImages[0].image" alt="" />
                  </div>
                  <div class="col-9">
                    <p class="regular-font">
                      <span class="pointer" (click)="navigateTo('/product/product-details')">{{
                        d?.variant?.sku }}</span>
                    </p>
                    <p class="text-color-secondary small-text attr" *ngFor="
                        let attr of d?.variant
                          ?.variantWithAttrVariantMap
                      ">
                      {{ attr.AttrVariantMapWithAttributes.name }} :
                      <ng-container *ngIf="attr?.AttrVariantMapWithAttributes?.type == 'color'"> <i class="fa-solid fa-square" [ngStyle]="{'background-color':attr?.value}" ></i></ng-container>
                      <ng-container *ngIf="attr?.AttrVariantMapWithAttributes?.type != 'color'"> {{ attr?.value }}</ng-container>
                    </p>
                  </div>
                  <div class="col-12 d-flex justify-content-end">
                    <p class="small-text">
                      x{{ d?.qty}} {{ d?.variant.price | currency : "INR" }}
                    </p>
                  </div>
                  <div class="col-12 d-flex justify-content-end">
                    <span class="small-text pointer" (click)="navigateTo('/order/cart')">
                      <i class="fa-solid fa-pencil me-2"></i>edit
                    </span>
                  </div>
                </div>
              </div>
            </div>
            <div class="p-3 border">
              <div class="row justify-content-between">
                <div class="col-4 regular-font">Subtotal</div>
                <div class="col-4 d-flex justify-content-end regular-font">
                  {{ totalItemPrice | currency : "INR" }}
                </div>
              </div>
            </div>
            <div class="card-body p-3">
              <div class="row justify-content-between">
                <div class="col-4">
                  <h5 class="regular-weight">Total (tax incl.)</h5>
                </div>
                <div class="col-4 d-flex justify-content-end">
                  <h5 class="regular-weight">
                    {{ totalItemPrice | currency : "INR" }}
                  </h5>
                </div>
              </div>
              <div class="row">
                <div class="col-12 description">
                  <p>Spend $168.50 more to get free shipping!</p>
                  <p class="regular-weight">
                    IQITFREEDELIVERYCOUNT - module, you can put own text in
                    configuration
                  </p>
                </div>
              </div>
            </div>
            <div class="row p-4 background-primary">
              <div class="col-2">
                <i class="fa-solid fa-tag"></i>
              </div>
              <div class="col-7">
                <input type="text" class="form-control promo-input w-100" placeholder="Promo code" />
              </div>
              <div class="col-3 d-flex justify-content-end">
                <p class="regular-weight pointer">Add</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>