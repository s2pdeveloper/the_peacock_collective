<div class="container-fluid">
  <div class="row justify-content-center">
    <div *ngIf="!user" class="d-none d-md-none d-lg-block col-lg-6 img-box">
      <img src="../../../../../assets/images/login-img.webp" alt="" />
    </div>
    <div *ngIf="!user" class="col-11 col-sm-8 col-md-6 col-lg-6">
      <div class="row justify-content-center login-wrapper">
        <div class="col-12">
          <h1 class="mb-4">Login</h1>
          <form [formGroup]="loginForm" class="pb-3">
            <div class="row align-items-center justify-content-between">
              <div class="col-12 mb-3">
                <input
                  type="email"
                  class="form-control background-primary rounded"
                  formControlName="email"
                  autocomplete="off"
                  placeholder="Email"
                />
              </div>
              <div class="col-12 password-input">
                <input
                  [type]="showEye ? 'password' : 'text'"
                  class="form-control background-primary"
                  autocomplete="off"
                  formControlName="password"
                  placeholder="Password"
                />
                @if(showEye){
                <div class="icon-box" (click)="showEye = !showEye">
                  <i class="fa-solid fa-eye-slash pointer"></i>
                </div>
                } @else{
                <div class="icon-box" (click)="showEye = !showEye">
                  <i class="fa-solid fa-eye pointer"></i>
                </div>
                }
              </div>
            </div>
            <div class="row py-3">
              <div class="col-12 d-flex justify-content-center">
                <span
                  class="pointer forgot-pass"
                  (click)="navigateTo('/auth/forgot-pass')"
                  >Forgot your password?</span
                >
              </div>
            </div>
            <div class="row justify-content-center">
              <div class="col-12 d-flex justify-content-center">
                <button
                  class="btn btn-dark py-2 px-3 rounded"
                  (click)="submit()"
                >
                  Sign in
                </button>
              </div>
            </div>
          </form>
          <div class="row pt-3">
            <div class="col-12 d-flex justify-content-center">
              <p class="pointer" (click)="navigateTo('/auth/register')">
                No account? <span class="forgot-pass">Create one here</span>
                <i class="fa-solid fa-chevron-right"></i>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="user" class="col-11 py-3">
      <div class="row justify-content-between align-items-center">
        <div class="col-9 col-sm-9 col-md-8 col-lg-6">
          <h4 class="py-3">You are Already Logged in</h4>
        </div>
        <div class="col-2 d-block d-sm-block d-md-none d-lg-none">
          <button (click)="logout()" class="btn btn-dark">
            <i class="fa-solid fa-arrow-right-from-bracket"></i>
          </button>
        </div>
        <div class="col-6 col-md-3 col-lg-2 mb-3">
          <!--    
          <button
            (click)="showAddressForm = !showAddressForm"
            class="btn px-3  btn-dark"
          >
            <i class="fa-solid fa-plus me-2"></i>
            Address
          </button> -->
          <button
            (click)="logout()"
            class="btn btn-dark d-none d-sm-none d-md-block d-lg-block"
          >
            Log out <i class="fa-solid fa-arrow-right-from-bracket ms-2"></i>
          </button>
        </div>
      </div>
    </div>
    <div *ngIf="user" class="col-11 address-column border-top">
      <div *ngIf="showAddressForm" class="row justify-content-center">
        <div class="col-6 mb-4">
          <h3 class="text-center py-3">
            {{ addressId ? "Update Delivery" : "Add Delivery" }} Address
          </h3>
        </div>
        <form [formGroup]="addressForm" class="pb-3">
          <div class="row my-3">
            <div class="col-12 col-md-12 col-lg-6">
              <div
                class="row justify-content-between justify-content-sm-start justify-content-md-start justify-content-lg-around"
              >
                <div class="col-2 d-flex align-items-center my-1">
                  <label for="inputPassword6" class="col-form-label"
                    >Name
                  </label>
                  <span class="text-danger">*</span>
                </div>
                <div class="col-9 d-flex my-1">
                  <input
                    type="text"
                    class="form-control background-primary"
                    formControlName="name"
                  />
                </div>
              </div>
            </div>
            <div
              class="col-12 col-md-12 col-lg-6 d-flex flex-column justify-content-center"
            >
              <div
                class="row justify-content-between justify-content-sm-start justify-content-md-start justify-content-lg-around"
              >
                <div class="col-2 d-flex align-items-center my-1">
                  <label for="inputPassword6" class="col-form-label"
                    >Type
                  </label>
                  <span class="text-danger">*</span>
                </div>
                <div class="col-9 d-flex my-1">
                  <div class="d-flex px-2 align-items-center">
                    <input
                      class="form-check-input me-2 background-primary"
                      type="radio"
                      name="type"
                      id="typeHome"
                      value="home"
                      formControlName="type"
                    />
                    <label class="form-check-label" for="typeHome">Home</label>
                  </div>
                  <div class="d-flex px-2 align-items-center">
                    <input
                      class="form-check-input me-2 background-primary"
                      type="radio"
                      name="type"
                      id="typeWork"
                      value="work"
                      formControlName="type"
                    />
                    <label class="form-check-label" for="typeWork">Work</label>
                  </div>
                  <div class="d-flex px-2 align-items-center">
                    <input
                      class="form-check-input me-2 background-primary"
                      type="radio"
                      name="type"
                      id="typeOther"
                      value="others"
                      formControlName="type"
                    />
                    <label class="form-check-label" for="typeOther"
                      >Other</label
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row my-3">
            <div class="col-12 col-md-12 col-lg-6">
              <div
                class="row justify-content-between justify-content-sm-start justify-content-md-start justify-content-lg-around"
              >
                <div class="col-2 d-flex align-items-center my-1">
                  <label for="inputPassword6" class="col-form-label"
                    >Address
                  </label>
                  <span class="text-danger">*</span>
                </div>
                <div class="col-9 d-flex my-1">
                  <textarea
                    formControlName="location"
                    class="form-control background-primary"
                    cols="10"
                  ></textarea>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-12 col-lg-6">
              <div
                class="row justify-content-between justify-content-sm-start justify-content-md-start justify-content-lg-around"
              >
                <div class="col-2 d-flex align-items-center my-1">
                  <label for="inputPassword6" class="col-form-label"
                    >Pin code
                  </label>
                  <span class="text-danger">*</span>
                </div>
                <div class="col-9 my-1">
                  <input
                    type="number"
                    class="form-control background-primary"
                    formControlName="pinCode"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="row my-3">
            <div class="col-12 col-md-12 col-lg-6">
              <div
                class="row justify-content-between justify-content-sm-start justify-content-md-start justify-content-lg-around"
              >
                <div class="col-2 d-flex align-items-center my-1">
                  <label for="inputPassword6" class="col-form-label"
                    >City
                  </label>
                  <span class="text-danger">*</span>
                </div>
                <div class="col-9 my-1">
                  <input
                    type="text"
                    class="form-control background-primary"
                    formControlName="city"
                  />
                </div>
              </div>
            </div>
            <div
              class="col-12 col-md-12 col-lg-6 d-flex flex-column justify-content-center"
            >
              <div
                class="row justify-content-between justify-content-sm-start justify-content-md-start justify-content-lg-around"
              >
                <div class="col-2 d-flex align-items-center my-1">
                  <label for="inputPassword6" class="col-form-label"
                    >State
                  </label>
                  <span class="text-danger">*</span>
                </div>
                <div class="col-9 my-1">
                  <input
                    type="text"
                    class="form-control background-primary"
                    formControlName="state"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="row my-3">
            <div class="col-12 col-md-12 col-lg-6">
              <div
                class="row justify-content-between justify-content-sm-start justify-content-md-start justify-content-lg-around"
              >
                <div class="col-2 d-flex align-items-center my-1">
                  <label for="inputPassword6" class="col-form-label"
                    >Country</label
                  >
                  <span class="text-danger">*</span>
                </div>
                <div class="col-9 my-1">
                  <input
                    type="text"
                    class="form-control background-primary"
                    formControlName="country"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="row my-4 justify-content-center">
            <div class="col-3 col-md-2 col-lg-2 me-2">
              <button
                *ngIf="!addressId"
                class="btn bg-dark p-2 w-100 text-light rounded-0"
                (click)="createAddress()"
              >
                Save
              </button>
              <button
                *ngIf="addressId"
                class="btn bg-dark p-2 w-100 text-light rounded-0"
                (click)="update()"
              >
                Update
              </button>
            </div>
            <div class="col-3 col-md-2 col-lg-2">
              <button
                class="btn bg-dark p-2 w-100 text-light rounded-0"
                (click)="showAddressForm = !showAddressForm"
              >
                Cancel
              </button>
            </div>
          </div>
        </form>
      </div>
      <div *ngIf="!showAddressForm" class="row py-4 justify-content-between">
        <div class="col-8 mb-3">
          <h2>
            <i class="fa-solid fa-location-dot text-danger me-2"></i>
            <span>
              My
              {{ allAddresses.length == 1 ? "Address" : "Addresses" }}
            </span>
          </h2>
        </div>
        <div class="col-6 col-sm-4 col-md-3 col-lg-2 mb-3">
          <button
            (click)="showAddressForm = !showAddressForm"
            class="btn px-3 btn-dark"
          >
            Add New Address
          </button>
        </div>
        <div class="col-12 py-3">
          <div class="row justify-content-around">
            <div
              *ngFor="let add of allAddresses; let i = index"
              class="col-12 card position-relative mb-3"
            >
              <div class="row">
                <div
                  class="col-4 col-md-3 col-lg-2 d-flex justify-content-center align-items-center"
                >
                  <span
                    class="bg-danger text-white rounded-pill px-3 py-2 ms-2"
                    >{{ add.type }}</span
                  >
                </div>
                <div
                  class="col-4 col-md-3 col-lg-2 d-flex justify-content-center align-items-center"
                >
                  <p>{{ add?.name }}</p>
                </div>
                <div
                  class="col-4 col-md-3 col-lg-3 d-flex justify-content-center align-items-center"
                >
                  <p>
                    {{ add?.location }}
                  </p>
                </div>
                <div
                  class="col-6 col-md-3 col-lg-2 d-flex justify-content-center align-items-center"
                >
                  <p>{{ add?.phone }}</p>
                </div>
                <div
                  class="col-6 col-md-3 col-lg-3 d-flex justify-content-end align-items-center"
                >
                  <span
                    class="d-flex icon p-3 rounded-circle me-3 align-items-center pointer"
                    (click)="edit(add)"
                  >
                    <i class="fa-solid fa-pen"></i>
                  </span>
                  <span
                    class="d-flex icon p-3 rounded-circle align-items-center pointer"
                    (click)="deleteAdd(add?.id)"
                  >
                    <i class="fa-solid fa-trash"></i>
                  </span>
                </div>
              </div>
              <div [class.bg-success]="add.isDefault" class="badge pointer">
                <button [disabled]="add.isDefault" class="default-btn" (click)="setDefault(add.id)">
                  <span
                    [class.text-light]="add.isDefault"
                    [class.text-dark]="!add.isDefault"
                    >Set Default{{add.isDefault}}</span
                  >
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
