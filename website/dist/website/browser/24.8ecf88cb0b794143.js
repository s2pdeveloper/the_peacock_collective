"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[24],{1024:(Mt,k,l)=>{l.r(k),l.d(k,{OrderModule:()=>kt});var c=l(177),t=l(4438),u=l(430),F=l(3871),C=l(6868),h=l(4011),y=l(5794),p=l(4341);const I=i=>({"background-color":i});function E(i,s){if(1&i&&(t.qex(0),t.nrm(1,"i",50),t.bVm()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngStyle",t.eq3(1,I,null==e?null:e.value))}}function R(i,s){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",null==e?null:e.value,"")}}function V(i,s){if(1&i&&(t.j41(0,"p",48),t.EFF(1),t.DNE(2,E,2,3,"ng-container",49)(3,R,2,1,"ng-container",49),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",null==e?null:e.AttrVariantMapWithAttributes.name," : "),t.R7$(),t.Y8G("ngIf","color"==(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.type)),t.R7$(),t.Y8G("ngIf","color"!=(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.type))}}function T(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",36)(1,"div",37),t.nrm(2,"img",38),t.j41(3,"div",20)(4,"p",39),t.EFF(5),t.k0s(),t.DNE(6,V,4,3,"p",40),t.k0s()(),t.j41(7,"div",41),t.EFF(8),t.nI1(9,"currency"),t.k0s(),t.j41(10,"div",42)(11,"input",43),t.mxI("ngModelChange",function(n){const o=t.eBV(e).$implicit;return t.DH7(o.qty,n)||(o.qty=n),t.Njj(n)}),t.bIt("change",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.showUpdate=!n.showUpdate)}),t.k0s()(),t.j41(12,"div",44)(13,"p",45),t.EFF(14),t.nI1(15,"currency"),t.k0s()(),t.j41(16,"div",46)(17,"span")(18,"i",47),t.bIt("click",function(){const n=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.deleteVariant(n.id))}),t.k0s()()()()}if(2&i){const e=s.$implicit;t.R7$(2),t.Y8G("src",null==e||null==e.cartWithVariants?null:e.cartWithVariants.variantImages[0].image,t.B4B),t.R7$(3),t.SpI(" ",null==e||null==e.cartWithVariants?null:e.cartWithVariants.sku," "),t.R7$(),t.Y8G("ngForOf",null==e||null==e.cartWithVariants?null:e.cartWithVariants.variantWithAttrVariantMap),t.R7$(2),t.SpI(" ",t.i5U(9,8,null==e||null==e.cartWithVariants?null:e.cartWithVariants.price,"CAD")," "),t.R7$(3),t.AVh("borderDanger",e.error),t.R50("ngModel",e.qty),t.R7$(3),t.SpI(" ",t.i5U(15,11,(null==e||null==e.cartWithVariants?null:e.cartWithVariants.price)*(null==e?null:e.qty),"CAD")," ")}}function A(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",51)(1,"button",17),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.updateAllCart())}),t.EFF(2," Update "),t.k0s()()}}let $=(()=>{class i{constructor(e,r,n,o,a){this.router=e,this.commonService=r,this.cartService=n,this.storageService=o,this.toasterService=a,this.qty=1,this.user=null,this.originalCart=[],this.carts=[],this.showUpdate=!1,this.payloadData={edit:[],delete:[]},this.user=this.storageService.get("Customer")}navigateTo(e){this.router.navigate([e])}ngOnInit(){this.getAllCart()}deleteVariant(e){console.log("id222222",e),this.cartService.delete(e).subscribe({next:r=>{console.log("success",r),this.toasterService.success(r?.result?.message),this.getAllCart()},error:r=>{console.log("err",r)}})}updateAllCart(){this.payloadData.edit=[];for(let e of this.carts){e.qty=Number(e.qty);let r=this.originalCart.find(n=>n.id==e.id);if(console.log("orgCart",r),this.checkForVariantQtyExceeds(e))return e.error=!0,void console.log("this.carts",this.carts);e.error=!1,r&&r.qty!=e.qty&&this.payloadData.edit.push(e)}console.log("this.payloadData)",this.payloadData),this.cartService.updateAll(this.payloadData).subscribe({next:e=>{this.toasterService.success("Cart updated successfully")},error:e=>{console.log("err",e)}})}checkForVariantQtyExceeds(e){let r=!1;for(const n of this.commonService.allData.variants)if(n.id==e.variantId){if("number"==typeof+e.qty){n.qty<e.qty&&(this.toasterService.error("Quantity not available in stock!!"),r=!0);break}this.toasterService.error("Invalid Quantity"),r=!0}return r}getAllCart(){this.cartService.getAll().subscribe({next:e=>{this.originalCart=JSON.parse(JSON.stringify(e.result.rows)),this.carts=JSON.parse(JSON.stringify(e.result.rows))},error:e=>{console.log("err",e)}})}get totalItemPrice(){return this.carts.reduce((r,n)=>r+n.cartWithVariants.price*n.qty,0)}checkout(){let e=this.carts.map(r=>({price:r.cartWithVariants.price*r.qty,qty:r.qty,variantId:r.variantId}));(0,c.UE)(this._platformId)&&(sessionStorage.setItem("products",JSON.stringify(e)),this.router.navigate(["/order/checkout"],{queryParams:{type:"CART"}}))}static#t=this.\u0275fac=function(r){return new(r||i)(t.rXU(u.Ix),t.rXU(F.h),t.rXU(C.m),t.rXU(h.n$),t.rXU(y.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-cart"]],decls:68,vars:12,consts:[[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-11"],[1,"py-3","text-color-primary","pointer"],[3,"click"],[1,"col-11","py-4"],[1,"p-4","regular-weight"],[1,"row"],[1,"col-12","col-md-12","col-lg-8","px-3"],[1,"row","border-bottom","pb-2","d-none","d-md-none","d-lg-flex"],[1,"col-3","text-center"],[1,"col-3","ps-5"],["class","row border-bottom p-2",4,"ngFor","ngForOf"],[1,"row","py-5"],["class","col-3 mb-3",4,"ngIf"],[1,"col-12"],[1,"w-50"],[1,"btn","btn-dark",3,"click"],[1,"col-12","col-md-12","col-lg-4"],[1,"card","rounded-0"],[1,"p-3"],[1,"row","justify-content-between"],[1,"col-4","regular-weight"],[1,"col-4","d-flex","justify-content-end","regular-weight"],[1,"card-body","p-3"],[1,"col-4"],[1,"regular-weight"],[1,"col-4","d-flex","justify-content-end"],[1,"col-12","description"],[1,"row","p-4","background-primary"],[1,"col-2"],[1,"fa-solid","fa-tag"],[1,"col-7"],[1,"col-3","d-flex","justify-content-end"],[1,"row","p-3"],[1,"btn","btn-dark","py-3","regular-weight",3,"click"],[1,"row","border-bottom","p-2"],[1,"col-12","col-sm-6","col-md-7","col-lg-3","text-center","d-flex"],["width","100","height","90","alt","",3,"src"],[1,"light-dark","regular-font"],["class","text-muted small-text attr",4,"ngFor","ngForOf"],[1,"offSet","col-1","col-md-1","col-lg-3","text-center","light-dark","small-text","my-auto"],[1,"col-4","col-sm-2","col-md-2","col-lg-3","text-center","my-auto"],["type","number","min","0",1,"w-50","input-number","background-primary",3,"ngModelChange","change","ngModel"],[1,"col-2","col-md-1","col-lg-2","text-center","light-dark","small-text","my-auto"],[1,"py-auto"],[1,"col-1","col-md-1","col-lg-1","text-center","my-auto"],[1,"fa-regular","fa-trash-can","pointer",3,"click"],[1,"text-muted","small-text","attr"],[4,"ngIf"],[1,"fa-solid","fa-square",3,"ngStyle"],[1,"col-3","mb-3"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3)(4,"span",4),t.bIt("click",function(){return n.navigateTo("/")}),t.EFF(5,"Home"),t.k0s(),t.EFF(6," / "),t.j41(7,"span"),t.EFF(8,"Cart"),t.k0s()()(),t.j41(9,"div",5)(10,"h1",6),t.EFF(11,"Shopping Cart"),t.k0s()(),t.j41(12,"div",2)(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",10),t.EFF(17,"Product"),t.k0s(),t.j41(18,"div",10),t.EFF(19,"Price"),t.k0s(),t.j41(20,"div",10),t.EFF(21,"Qty"),t.k0s(),t.j41(22,"div",11),t.EFF(23,"Total"),t.k0s()(),t.DNE(24,T,19,14,"div",12),t.j41(25,"div",13),t.DNE(26,A,3,0,"div",14),t.j41(27,"div",15)(28,"div",16)(29,"button",17),t.bIt("click",function(){return n.navigateTo("/home")}),t.EFF(30," Continue Shopping "),t.k0s()()()()(),t.j41(31,"div",18)(32,"div",19)(33,"div",20)(34,"div",21)(35,"div",22),t.EFF(36),t.k0s(),t.j41(37,"div",23),t.EFF(38),t.nI1(39,"currency"),t.k0s()()(),t.j41(40,"div",24)(41,"div",21)(42,"div",25)(43,"h5",26),t.EFF(44,"Total (tax incl.)"),t.k0s()(),t.j41(45,"div",27)(46,"h5",26),t.EFF(47),t.nI1(48,"currency"),t.k0s()()(),t.j41(49,"div",7)(50,"div",28)(51,"p"),t.EFF(52,"Spend $168.50 more to get free shipping!"),t.k0s(),t.j41(53,"p",26),t.EFF(54," IQITFREEDELIVERYCOUNT - module, you can put own text in configuration "),t.k0s()()()(),t.j41(55,"div",29)(56,"div",30),t.nrm(57,"i",31),t.k0s(),t.j41(58,"div",32)(59,"p",26),t.EFF(60,"Promo Code"),t.k0s()(),t.j41(61,"div",33)(62,"p",26),t.EFF(63,"Add"),t.k0s()()(),t.j41(64,"div",34)(65,"div",15)(66,"button",35),t.bIt("click",function(){return n.checkout()}),t.EFF(67," Proceed to checkout "),t.k0s()()()()()()()()()),2&r&&(t.R7$(24),t.Y8G("ngForOf",n.carts),t.R7$(2),t.Y8G("ngIf",n.showUpdate),t.R7$(10),t.Lme(" ",null==n.carts?null:n.carts.length," ",(null==n.carts?null:n.carts.length)<1?"item":"items"," "),t.R7$(2),t.SpI(" ",t.i5U(39,6,n.totalItemPrice,"CAD")," "),t.R7$(9),t.SpI(" ",t.i5U(48,9,n.totalItemPrice,"CAD")," "))},dependencies:[c.Sq,c.bT,c.B3,p.me,p.Q0,p.BC,p.VZ,p.vS,c.oe],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0}td[_ngcontent-%COMP%]{height:auto;vertical-align:middle;text-align:center}.description[_ngcontent-%COMP%]{color:#0c5460;background-color:#d1ecf1;border-color:#bee5eb;padding:.5rem;margin-top:1rem}.form-control[_ngcontent-%COMP%], .input-number[_ngcontent-%COMP%]{border:0;border-radius:0;padding:.5rem 1rem!important}.form-control[_ngcontent-%COMP%]:focus, .input-number[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none;border-bottom:1px solid #000;border-top:0;border-left:0;border-right:0}.form-control[_ngcontent-%COMP%]:focus-visible, .input-number[_ngcontent-%COMP%]:focus-visible{border-bottom:1px solid #000;border-top:0;border-left:0;border-right:0;outline:none}.btn-dark[_ngcontent-%COMP%], .btn-light[_ngcontent-%COMP%]{width:100%!important;padding:.5rem 0!important;border-radius:0!important}.btn[_ngcontent-%COMP%]:focus{box-shadow:none}.btn[_ngcontent-%COMP%]:active{border:0}input[_ngcontent-%COMP%]:focus{box-shadow:none}.background-primary[_ngcontent-%COMP%]{background-color:#f8f8f8}.text-muted[_ngcontent-%COMP%]{color:#acaaa6!important;font-weight:400}.regular-font[_ngcontent-%COMP%]{font-size:.9rem;font-weight:400}.small-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400}.regular-weight[_ngcontent-%COMP%]{font-weight:400}.borderDanger[_ngcontent-%COMP%]{border:1px solid #d13737}.fa-square[_ngcontent-%COMP%]{width:20px;height:20px}.fa-square[_ngcontent-%COMP%]:before{content:""}.attr[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:5px}@media (max-width: 575px){.offSet[_ngcontent-%COMP%]{margin-left:33.33333333%!important}}']})}return i})();var m=l(6354);let j=(()=>{class i{constructor(e){this.http=e,this.BASE_URL="order"}getAll(e){return this.http.get(this.BASE_URL,e)}create(e){return this.http.post(this.BASE_URL,e).pipe((0,m.T)(r=>r))}validateOrder(e){return this.http.post(this.BASE_URL+"/validateOrder",e).pipe((0,m.T)(r=>r))}update(e,r){return this.http.put(this.BASE_URL+"/"+e,r).pipe((0,m.T)(n=>n))}delete(e){return this.http.delete(this.BASE_URL+"/"+e).pipe((0,m.T)(r=>r))}getById(e){return this.http.get(this.BASE_URL+"/"+e).pipe((0,m.T)(r=>r))}static#t=this.\u0275fac=function(r){return new(r||i)(t.KVO(h.Gf))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var W=l(6962);let G=(()=>{class i{constructor(e){this.http=e,this.BASE_URL="payment"}pay(e){return this.http.post(this.BASE_URL,e)}createTransaction(e){return this.http.post("transactions",e)}static#t=this.\u0275fac=function(r){return new(r||i)(t.KVO(h.Gf))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var f,P=l(467),O="https://js.stripe.com/v3",D=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,M="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",w=function(s){var e=s&&!s.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(O).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},g=null,_=null,b=null,x=!1,S=function(){return f||(f=(s=null,null!==g?g:(g=new Promise(function(e,r){if(typeof window>"u"||typeof document>"u")e(null);else if(window.Stripe&&s&&console.warn(M),window.Stripe)e(window.Stripe);else try{var n=function(){for(var s=document.querySelectorAll('script[src^="'.concat(O,'"]')),e=0;e<s.length;e++){var r=s[e];if(D.test(r.src))return r}return null}();if(n&&s)console.warn(M);else if(n){if(n&&null!==b&&null!==_){var o;n.removeEventListener("load",b),n.removeEventListener("error",_),null===(o=n.parentNode)||void 0===o||o.removeChild(n),n=w(s)}}else n=w(s);b=function(s,e){return function(){window.Stripe?s(window.Stripe):e(new Error("Stripe.js not available"))}}(e,r),_=function(s){return function(){s(new Error("Failed to load Stripe.js"))}}(r),n.addEventListener("load",b),n.addEventListener("error",_)}catch(a){return void r(a)}})).catch(function(e){return g=null,Promise.reject(e)})).catch(function(s){return f=null,Promise.reject(s)}));var s};Promise.resolve().then(function(){return S()}).catch(function(i){x||console.warn(i)});var J=l(5312),Q=l(1626);let H=(()=>{class i{constructor(e){this.http=e,this.stripe=null,this.paymentError=null,this.stripeEvent=new t.bkB}ngOnInit(){var e=this;return(0,P.A)(function*(){e.stripe=yield function(){for(var s=arguments.length,e=new Array(s),r=0;r<s;r++)e[r]=arguments[r];x=!0;var n=Date.now();return S().then(function(o){return function(s,e,r){if(null===s)return null;var n=s.apply(void 0,e);return function(s,e){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"3.5.0",startTime:e})}(n,r),n}(o,e,n)})}(J.c.stripePublishKey);const o=e.stripe.elements();e.card=o.create("card",{style:{base:{color:"#fff",fontFamily:"Roboto, sans-serif",fontSize:"18px",iconColor:"#fff","::placeholder":{color:"rgba(255, 255, 255, 0.7)"},":-webkit-autofill":{color:"#fce883"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}),e.card.mount("#card-element")})()}pay(){var e=this;return(0,P.A)(function*(){const{token:r,error:n}=yield e.stripe.createToken(e.card);n?e.paymentError=n.message:e.handlePayment(r)})()}handlePayment(e){console.log("Received Stripe token:",e),this.stripeEvent.emit(e)}static#t=this.\u0275fac=function(r){return new(r||i)(t.rXU(Q.Qq))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-strive"]],outputs:{stripeEvent:"stripeEvent"},decls:9,vars:0,consts:[[1,"card-container"],[1,"card"],[1,"card-details"],[1,"d-flex","justify-content-between"],[1,"fa-solid","text-light","fa-house"],["width","100","src","../../../../../assets/images/stripe-logo.png","alt",""],["id","card-element",1,"card-number"],["type","submit",1,"btn","btn-dark","py-3","mt-3",3,"click"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.nrm(4,"i",4)(5,"img",5),t.k0s(),t.nrm(6,"div",6),t.k0s()()(),t.j41(7,"button",7),t.bIt("click",function(){return n.pay()}),t.EFF(8,"Submit Payment"),t.k0s())},styles:['.card-container[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 4px 8px #0000001a;max-width:400px;margin:0 auto}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#121111;color:#fff;border-radius:10px;padding:36px;position:relative;overflow:hidden}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;width:100%;background:linear-gradient(135deg,#ffffff1a,#fff0 70%);pointer-events:none}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:150px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%]{font-size:18px;letter-spacing:2px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-name[_ngcontent-%COMP%], .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-expiry[_ngcontent-%COMP%]{font-size:14px;text-transform:uppercase}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-expiry[_ngcontent-%COMP%]{align-self:flex-end}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-logo[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;height:30px}#card-element[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;font-size:18px;font-family:Roboto,sans-serif;letter-spacing:2px}#card-element[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}#card-element[_ngcontent-%COMP%]:focus{outline:none}.btn-dark[_ngcontent-%COMP%], .btn-light[_ngcontent-%COMP%]{width:100%!important;padding:.5rem 0!important;border-radius:0!important}.btn[_ngcontent-%COMP%]:focus{box-shadow:none}.btn[_ngcontent-%COMP%]:active{border:0}i[_ngcontent-%COMP%]{font-size:28px}']})}return i})();const z=i=>({"background-color":i});function K(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",52)(1,"div",6)(2,"div",16)(3,"div",53)(4,"p"),t.EFF(5),t.k0s(),t.j41(6,"span",54),t.EFF(7),t.k0s()(),t.j41(8,"p",55),t.EFF(9),t.k0s(),t.j41(10,"p"),t.EFF(11),t.k0s()(),t.j41(12,"div",56)(13,"span")(14,"input",57),t.mxI("ngModelChange",function(n){t.eBV(e);const o=t.XpG();return t.DH7(o.selectedAddressId,n)||(o.selectedAddressId=n),t.Njj(n)}),t.k0s()()()()()}if(2&i){const e=s.$implicit,r=t.XpG();t.R7$(5),t.JRh(null==e?null:e.name),t.R7$(2),t.JRh(e.type),t.R7$(2),t.SpI(" ",null==e?null:e.location," "),t.R7$(2),t.JRh(null==e?null:e.phone),t.R7$(3),t.R50("ngModel",r.selectedAddressId),t.Y8G("value",e.id)}}function Z(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",58)(1,"app-strive",59),t.bIt("stripeEvent",function(n){t.eBV(e);const o=t.XpG();return t.Njj(o.stripePay(n))}),t.k0s()()}}function tt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",60),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.createOrder())}),t.EFF(1," Place Order "),t.k0s()}}function et(i,s){if(1&i&&(t.qex(0),t.nrm(1,"i",71),t.bVm()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngStyle",t.eq3(1,z,null==e?null:e.value))}}function nt(i,s){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",null==e?null:e.value,"")}}function rt(i,s){if(1&i&&(t.j41(0,"p",70),t.EFF(1),t.DNE(2,et,2,3,"ng-container",37)(3,nt,2,1,"ng-container",37),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",e.AttrVariantMapWithAttributes.name," : "),t.R7$(),t.Y8G("ngIf","color"==(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.type)),t.R7$(),t.Y8G("ngIf","color"!=(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.type))}}function it(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",39)(1,"div",62)(2,"img",63),t.bIt("click",function(){const n=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.navigateToProdDetails(null==n||null==n.product?null:n.product.id))}),t.k0s()(),t.j41(3,"div",64)(4,"p",33)(5,"span",65),t.bIt("click",function(){const n=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.navigateToProdDetails(null==n||null==n.product?null:n.product.id))}),t.EFF(6),t.k0s()(),t.DNE(7,rt,4,3,"p",66),t.k0s(),t.j41(8,"div",67)(9,"p",35),t.EFF(10),t.nI1(11,"currency"),t.k0s()(),t.j41(12,"div",67)(13,"span",68),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.navigateTo("/order/cart"))}),t.nrm(14,"i",69),t.EFF(15,"edit "),t.k0s()()()}if(2&i){const e=s.$implicit;t.R7$(2),t.Y8G("src",null==e||null==e.variant?null:e.variant.variantImages[0].image,t.B4B),t.R7$(4),t.JRh(null==e||null==e.variant?null:e.variant.sku),t.R7$(),t.Y8G("ngForOf",null==e||null==e.variant?null:e.variant.variantWithAttrVariantMap),t.R7$(3),t.Lme(" x",null==e?null:e.qty," ",t.i5U(11,5,null==e?null:e.variant.price,"CAD")," ")}}function ot(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,it,16,8,"div",61),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.product)}}let st=(()=>{class i{constructor(e,r,n,o,a,d,v,Ft,jt,Pt,Ot){this.router=e,this.actRouter=r,this.orderService=n,this.storageService=o,this.addressService=a,this.toasterService=d,this.spinnerService=v,this.commonService=Ft,this.cartService=jt,this.paymentService=Pt,this._platformId=Ot,this.showEye=!0,this.collapsed=!1,this.collapsedAddress=!0,this.collapsedPayment=!0,this.collapsedDetails=!0,this.selectedAddressId=null,this.allAddresses=[],this.product=[],this.shippingFee=0,this.discount=0,this.type=null,this.user=this.storageService.get("Customer")}navigateTo(e){this.router.navigate([e])}navigateToProdDetails(e){this.router.navigate([`/product/product-details/${e}`])}ngOnInit(){this.actRouter.queryParams.subscribe(r=>{r?.type&&(this.type=r.type)}),(0,c.UE)(this._platformId)&&(this.product=sessionStorage.getItem("products")?JSON.parse(sessionStorage.getItem("products")):[]),this.getAddresses();let e=JSON.parse(JSON.stringify(this.commonService.allData.products));if(this.product.length)for(let r=0;r<this.product.length;r++){let n=this.product[r],o=null;for(let a of e)if(a.productWithVariants.some(d=>d.id==n.variantId)&&(o=a.productWithVariants.find(d=>d.id==n.variantId),o)){this.product[r].product=a,this.product[r].variant=o,this.product[r].price=this.product[r].qty*o.price;break}}}createOrder(){let e=this.product.reduce((n,o)=>n+o.price,0);this.orderValidate({products:this.product,addressId:this.selectedAddressId,type:this.type,amount:e+this.shippingFee-this.discount,shippingFee:this.shippingFee,discount:this.discount})}orderValidate(e){this.orderService.validateOrder(e).subscribe({next:r=>{this.order(e)}})}stripePay(e){let r=this.product.reduce((a,d)=>a+d.price,0),o={products:this.product,addressId:this.selectedAddressId,desc:(a=>{let d="";for(const v of a)d=(d?d+",":"")+`${v.variant.sku} (QTY: ${v.qty},Price : \u20b9 ${v.variant.price} / unit)`;return d})(this.product),type:this.type};this.orderService.validateOrder(o).subscribe({next:a=>{this.paymentStripe(e,o,r)}})}paymentStripe(e,r,n){this.spinnerService.show(),this.paymentService.pay({token:e.id,desc:r.desc,amount:n,email:this.user.email,name:this.user.name}).subscribe({next:a=>{this.spinnerService.show();let d={...r,amount:n+this.shippingFee-this.discount,transId:a?.result?.data?.id,shippingFee:this.shippingFee,discount:this.discount};"succeeded"==a?.result?.data?.status?this.order(d):this.toasterService.error("Transaction Failed!!")},error:a=>{this.spinnerService.show(),console.log("err",a)}})}order(e){console.log("payload",e),this.spinnerService.show(),this.orderService.create(e).subscribe({next:r=>{this.spinnerService.hide(),this.toasterService.success("Order placed successfully!!"),(0,c.UE)(this._platformId)&&sessionStorage.removeItem("products"),this.router.navigate(["/order/my-orders"])},error:r=>{this.spinnerService.hide(),console.log("err",r)}})}get totalItemPrice(){return this.product.reduce((r,n)=>r+n?.variant.price*n.qty,0)}ngOnDestroy(){if((0,c.UE)(this._platformId))try{sessionStorage.getItem("products")&&sessionStorage.removeItem("products")}catch(e){console.log("error",e)}}getAddresses(){this.user&&this.addressService.getByCustomerId().subscribe(e=>{this.allAddresses=e.result.rows;for(const r of this.allAddresses)if(r.isDefault){this.selectedAddressId=r.id;break}})}continue(){null!=this.selectedAddressId||null!=this.selectedAddressId?(this.collapsedPayment=!this.collapsedPayment,this.collapsed=!this.collapsed):this.toasterService.error("Please select atleast 1 address")}getAllCartData(){this.cartService.getAll().subscribe(e=>{this.product=e.result.rows})}static#t=this.\u0275fac=function(r){return new(r||i)(t.rXU(u.Ix),t.rXU(u.nX),t.rXU(j),t.rXU(h.n$),t.rXU(W.E),t.rXU(y.tw),t.rXU(h.Dx),t.rXU(F.h),t.rXU(C.m),t.rXU(G),t.rXU(t.Agw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-checkout"]],decls:93,vars:23,consts:[[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-11"],[1,"py-3","text-color-primary","pointer"],[3,"click"],[1,"p-4","regular-weight"],[1,"row"],[1,"col-12","col-md-12","col-lg-8"],[1,"row","px-3","address-info",3,"ngClass"],[1,"col-12","border"],[1,"p-4","border-bottom"],[1,"fw-bold"],[1,"p-3",3,"ngClass"],[1,"row","justify-content-around"],["class","col-10 col-md-4 col-lg-5 card position-relative p-4",4,"ngFor","ngForOf"],[1,"p-4","pt-1",3,"ngClass"],[1,"col-12"],[1,"btn","btn-dark","py-3",3,"click","disabled"],[1,"row","px-3","payment-info",3,"ngClass"],[1,"px-4","py-3",3,"ngClass"],[1,"row","align-items-center","px-4","py-3"],[1,"col-1"],["type","radio","value","cod","name","payment","id","cod",3,"ngModelChange","ngModel"],["for","cod"],["type","radio","value","card","name","payment","id","card",3,"ngModelChange","ngModel"],["for","card"],["class","card-container",4,"ngIf"],["class","btn btn-dark py-3 mt-3",3,"click",4,"ngIf"],[1,"col-12","col-md-12","col-lg-4"],[1,"card","rounded-0"],[1,"p-3"],[1,"row","py-3","justify-content-between"],[1,"col-4"],[1,"regular-font"],[1,"col-4","d-flex","justify-content-end"],[1,"small-text"],[1,"fa-solid","fa-chevron-down","ms-1","pointer",3,"click"],[4,"ngIf"],[1,"p-3","border"],[1,"row","justify-content-between"],[1,"col-4","regular-font"],[1,"col-4","d-flex","justify-content-end","regular-font"],[1,"card-body","p-3"],[1,"regular-weight"],[1,"col-12","description"],[1,"row","p-4","background-primary"],[1,"col-2"],[1,"fa-solid","fa-tag"],[1,"col-7"],["type","text","placeholder","Promo code",1,"form-control","promo-input","w-100"],[1,"col-3","d-flex","justify-content-end"],[1,"regular-weight","pointer"],[1,"col-10","col-md-4","col-lg-5","card","position-relative","p-4"],[1,"d-flex","mb-3","align-items-center"],[1,"bg-light","small-text","text-muted","p-1","ms-2"],[1,"mb-3"],[1,"badge","pointer"],["type","radio","name","address",3,"ngModelChange","ngModel","value"],[1,"card-container"],[3,"stripeEvent"],[1,"btn","btn-dark","py-3","mt-3",3,"click"],["class","row justify-content-between",4,"ngFor","ngForOf"],[1,"col-3","p-3","pb-0"],["alt","",1,"img-fluid",3,"click","src"],[1,"col-9"],[1,"pointer",3,"click"],["class","text-color-secondary small-text attr",4,"ngFor","ngForOf"],[1,"col-12","d-flex","justify-content-end"],[1,"small-text","pointer",3,"click"],[1,"fa-solid","fa-pencil","me-2"],[1,"text-color-secondary","small-text","attr"],[1,"fa-solid","fa-square",3,"ngStyle"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3)(4,"span",4),t.bIt("click",function(){return n.navigateTo("/")}),t.EFF(5,"Home"),t.k0s(),t.EFF(6," / "),t.j41(7,"span"),t.EFF(8,"Checkout"),t.k0s()()(),t.j41(9,"div",2)(10,"h1",5),t.EFF(11,"Checkout"),t.k0s()(),t.j41(12,"div",2)(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"p",11),t.EFF(19,"1 Addresses"),t.k0s()(),t.j41(20,"div",12)(21,"div",13),t.DNE(22,K,15,6,"div",14),t.k0s()(),t.j41(23,"div",15)(24,"div",1)(25,"div",16)(26,"button",17),t.bIt("click",function(){return n.continue()}),t.EFF(27," Continue "),t.k0s()()()()()(),t.j41(28,"div",18)(29,"div",9)(30,"div",10)(31,"p",11),t.EFF(32,"2 Payment"),t.k0s()(),t.j41(33,"div",19)(34,"div",20)(35,"div",21)(36,"input",22),t.mxI("ngModelChange",function(a){return t.DH7(n.payment,a)||(n.payment=a),a}),t.k0s()(),t.j41(37,"div",2)(38,"label",23),t.EFF(39,"COD"),t.k0s()()(),t.j41(40,"div",20)(41,"div",21)(42,"input",24),t.mxI("ngModelChange",function(a){return t.DH7(n.payment,a)||(n.payment=a),a}),t.k0s()(),t.j41(43,"div",2)(44,"label",25),t.EFF(45,"CARD"),t.k0s()()()(),t.j41(46,"div",15)(47,"div",1)(48,"div",16),t.DNE(49,Z,2,0,"div",26)(50,tt,2,0,"button",27),t.k0s()()()()()(),t.j41(51,"div",28)(52,"div",29)(53,"div",30)(54,"div",31)(55,"div",32)(56,"h5",33),t.EFF(57),t.k0s()(),t.j41(58,"div",34)(59,"h5",35),t.EFF(60," show details "),t.j41(61,"i",36),t.bIt("click",function(){return n.collapsedDetails=!n.collapsedDetails}),t.k0s()()()(),t.DNE(62,ot,2,1,"div",37),t.k0s(),t.j41(63,"div",38)(64,"div",39)(65,"div",40),t.EFF(66,"Subtotal"),t.k0s(),t.j41(67,"div",41),t.EFF(68),t.nI1(69,"currency"),t.k0s()()(),t.j41(70,"div",42)(71,"div",39)(72,"div",32)(73,"h5",43),t.EFF(74,"Total (tax incl.)"),t.k0s()(),t.j41(75,"div",34)(76,"h5",43),t.EFF(77),t.nI1(78,"currency"),t.k0s()()(),t.j41(79,"div",6)(80,"div",44)(81,"p"),t.EFF(82,"Spend $168.50 more to get free shipping!"),t.k0s(),t.j41(83,"p",43),t.EFF(84," IQITFREEDELIVERYCOUNT - module, you can put own text in configuration "),t.k0s()()()(),t.j41(85,"div",45)(86,"div",46),t.nrm(87,"i",47),t.k0s(),t.j41(88,"div",48),t.nrm(89,"input",49),t.k0s(),t.j41(90,"div",50)(91,"p",51),t.EFF(92,"Add"),t.k0s()()()()()()()()()),2&r&&(t.R7$(15),t.Y8G("ngClass",n.collapsed?"info-collapsed":"info"),t.R7$(5),t.Y8G("ngClass",n.collapsed?"d-none":"d-block"),t.R7$(2),t.Y8G("ngForOf",n.allAddresses),t.R7$(),t.Y8G("ngClass",n.collapsed?"d-none":"d-block"),t.R7$(3),t.Y8G("disabled",!n.product.length),t.R7$(2),t.Y8G("ngClass",n.collapsedPayment?"info-collapsed":"info"),t.R7$(5),t.Y8G("ngClass",n.collapsedPayment?"d-none":"d-block"),t.R7$(3),t.R50("ngModel",n.payment),t.R7$(6),t.R50("ngModel",n.payment),t.R7$(4),t.Y8G("ngClass",n.collapsedPayment?"d-none":"d-block"),t.R7$(3),t.Y8G("ngIf","card"==n.payment),t.R7$(),t.Y8G("ngIf","card"!=n.payment),t.R7$(7),t.Lme(" ",n.product.length," ",n.product.length>1?"items":"item"," "),t.R7$(5),t.Y8G("ngIf",!n.collapsedDetails),t.R7$(6),t.SpI(" ",t.i5U(69,17,n.totalItemPrice,"CAD")," "),t.R7$(9),t.SpI(" ",t.i5U(78,20,n.totalItemPrice,"CAD")," "))},dependencies:[c.YU,c.Sq,c.bT,c.B3,p.me,p.Fm,p.BC,p.vS,H,c.oe],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0}.description[_ngcontent-%COMP%]{color:#0c5460;background-color:#d1ecf1;border-color:#bee5eb;padding:.5rem;margin-top:1rem}.password-input[_ngcontent-%COMP%]{display:flex}.password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:95%}.password-input[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%], .opt-box[_ngcontent-%COMP%]{padding:.5rem;background-color:#f8f8f8;display:flex;justify-content:center;align-items:center}.background-danger[_ngcontent-%COMP%]{background-color:#f8d7da}.info[_ngcontent-%COMP%]{height:auto}.background-primary[_ngcontent-%COMP%]{background-color:#f8f8f8}.form-control[_ngcontent-%COMP%], .input-number[_ngcontent-%COMP%]{border:0;border-radius:0;padding:.5rem 1rem!important}.form-control[_ngcontent-%COMP%]:focus, .input-number[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none;border-bottom:1px solid #000;border-top:0;border-left:0;border-right:0}.form-control[_ngcontent-%COMP%]:focus-visible, .input-number[_ngcontent-%COMP%]:focus-visible{border-bottom:1px solid #000;border-top:0;border-left:0;border-right:0;outline:none}.btn-dark[_ngcontent-%COMP%], .btn-light[_ngcontent-%COMP%]{width:100%!important;padding:.5rem 0!important;border-radius:0!important}.btn[_ngcontent-%COMP%]:focus{box-shadow:none}.btn[_ngcontent-%COMP%]:active{border:0}input[_ngcontent-%COMP%]:focus{box-shadow:none}.small-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400}.badge[_ngcontent-%COMP%]{background-color:#ededed;border-radius:1rem;position:absolute;left:-3%;top:-10%;padding:.5rem;width:10%}.card[_ngcontent-%COMP%]{margin:1rem}.fa-square[_ngcontent-%COMP%]{width:20px;height:20px}.fa-square[_ngcontent-%COMP%]:before{content:""}.attr[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}@media (max-width: 992px){.personal-info[_ngcontent-%COMP%], .address-info[_ngcontent-%COMP%], .shipping-info[_ngcontent-%COMP%], .payment-info[_ngcontent-%COMP%]{padding:0!important}}.info-collapsed[_ngcontent-%COMP%]{height:73px}.promo-input[_ngcontent-%COMP%]{background-color:transparent}']})}return i})();const at=i=>({"background-color":i});function ct(i,s){if(1&i&&(t.qex(0),t.nrm(1,"i",31),t.bVm()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngStyle",t.eq3(1,at,null==e?null:e.value))}}function lt(i,s){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",null==e?null:e.value,"")}}function dt(i,s){if(1&i&&(t.j41(0,"p",29),t.EFF(1),t.DNE(2,ct,2,3,"ng-container",30)(3,lt,2,1,"ng-container",30),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",e.AttrVariantMapWithAttributes.name,": "),t.R7$(),t.Y8G("ngIf","color"==(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.type)),t.R7$(),t.Y8G("ngIf","color"!=(null==e||null==e.AttrVariantMapWithAttributes?null:e.AttrVariantMapWithAttributes.type))}}function pt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",20)(1,"div",21)(2,"img",22),t.bIt("click",function(){const n=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.navigateToProdDetails(null==n||null==n.orderVariantMapWithVariant?null:n.orderVariantMapWithVariant.productId))}),t.k0s(),t.j41(3,"div",23)(4,"p",24),t.EFF(5),t.k0s(),t.DNE(6,dt,4,3,"p",25),t.k0s()(),t.j41(7,"div",26),t.EFF(8),t.k0s(),t.j41(9,"div",27),t.EFF(10),t.nI1(11,"currency"),t.k0s(),t.j41(12,"div",27)(13,"p",28),t.EFF(14),t.nI1(15,"currency"),t.k0s()()()}if(2&i){const e=s.$implicit;t.R7$(2),t.Y8G("src",null==e||null==e.orderVariantMapWithVariant?null:e.orderVariantMapWithVariant.variantImages[0].image,t.B4B),t.R7$(3),t.SpI(" ",e.orderVariantMapWithVariant.sku," "),t.R7$(),t.Y8G("ngForOf",e.orderVariantMapWithVariant.variantWithAttrVariantMap),t.R7$(2),t.SpI(" ",e.qty," "),t.R7$(2),t.SpI(" ",t.i5U(11,6,e.orderVariantMapWithVariant.price,"CAD")," "),t.R7$(4),t.SpI(" ",t.i5U(15,9,e.qty*e.orderVariantMapWithVariant.price,"CAD")," ")}}function ut(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",11)(1,"div",4)(2,"div",12)(3,"div",13),t.EFF(4,"Products"),t.k0s(),t.j41(5,"div",14),t.EFF(6,"Quantity"),t.k0s(),t.j41(7,"div",15),t.EFF(8,"Price"),t.k0s(),t.j41(9,"div",15),t.EFF(10,"Total"),t.k0s()(),t.DNE(11,pt,16,12,"div",16),t.j41(12,"div",17)(13,"div",18)(14,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.navigateTo("/home"))}),t.EFF(15," Continue Shopping "),t.k0s()()()()()}if(2&i){const e=t.XpG();t.R7$(11),t.Y8G("ngForOf",e.orderVariants)}}function ht(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",32)(1,"h2",33),t.EFF(2,"No orders in Order List!"),t.k0s(),t.j41(3,"div",3)(4,"div",34)(5,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.navigateTo("/home"))}),t.EFF(6,"Continue Shopping"),t.k0s()()()()}}let mt=(()=>{class i{constructor(e,r){this.orderService=e,this.router=r,this.orders=[],this.orderVariants=[]}ngOnInit(){this.getAllOrder()}getAllOrder(){this.orderService.getAll({}).subscribe({next:e=>{this.orders=e.result;let r=this.orders.map(n=>n.orderWithOrderVariantMap);for(const n of r)for(const o of n)this.orderVariants.push(o);console.log("this.orderVariants",this.orderVariants)},error:e=>{console.log("err",e)}})}navigateTo(e){this.router.navigate([e])}navigateToProdDetails(e){this.router.navigate([`/product/product-details/${e}`])}static#t=this.\u0275fac=function(r){return new(r||i)(t.rXU(j),t.rXU(u.Ix))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-my-order"]],decls:15,vars:2,consts:[[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-11"],[1,"row"],[1,"col-12"],[1,"row","w-100","justify-content-between"],[1,"col-12","col-lg-11"],[1,"py-3","text-color-primary","pointer"],[3,"click"],["class","row mt-5 w-100 justify-content-between",4,"ngIf"],["class","col-12 p-3 border-bottom",4,"ngIf"],[1,"row","mt-5","w-100","justify-content-between"],[1,"row","border-bottom","pb-2"],[1,"col-5"],[1,"col-3","text-center"],[1,"col-2","text-center"],["class","row border-bottom p-2",4,"ngFor","ngForOf"],[1,"row","py-5"],[1,"col-6","col-md-4","col-lg-2"],[1,"btn","btn-dark",3,"click"],[1,"row","border-bottom","p-2"],[1,"col-5","text-center","d-block","d-md-flex","d-lg-flex"],["width","100","height","90","alt","",3,"click","src"],[1,"p-3"],[1,"light-dark","regular-font"],["class","text-muted small-text attr",4,"ngFor","ngForOf"],[1,"col-3","text-center","light-dark","small-text","my-auto"],[1,"col-2","text-center","light-dark","small-text","my-auto"],[1,"py-auto"],[1,"text-muted","small-text","attr"],[4,"ngIf"],[1,"fa-solid","fa-square",3,"ngStyle"],[1,"col-12","p-3","border-bottom"],[1,"mb-4"],[1,"col-9","col-md-4","col-lg-4"],[1,"btn","btn-dark","p-2",3,"click"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"p",7)(8,"span",8),t.bIt("click",function(){return n.navigateTo("/")}),t.EFF(9,"Home"),t.k0s(),t.EFF(10," / "),t.j41(11,"span"),t.EFF(12,"My Orders"),t.k0s()()()(),t.DNE(13,ut,16,1,"div",9)(14,ht,7,0,"div",10),t.k0s()()()()()),2&r&&(t.R7$(13),t.Y8G("ngIf",n.orderVariants.length),t.R7$(),t.Y8G("ngIf",!n.orderVariants.length))},dependencies:[c.Sq,c.bT,c.B3,c.oe],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0}.fa-square[_ngcontent-%COMP%]{width:20px;height:20px}.fa-square[_ngcontent-%COMP%]:before{content:""}.attr[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:5px}']})}return i})();var gt=l(8061);function ft(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"img",14),t.bIt("click",function(){const n=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.navigateToProdDetails(null==n||null==n.variantWithWishList||null==n.variantWithWishList.variantWithProduct?null:n.variantWithWishList.variantWithProduct.id))}),t.k0s(),t.j41(3,"p",15),t.EFF(4),t.k0s(),t.j41(5,"p",15),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.j41(8,"button",16),t.bIt("click",function(){const n=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.createCart(n.variantId))}),t.nrm(9,"i",17),t.EFF(10,"Add to cart "),t.k0s(),t.j41(11,"button",18),t.bIt("click",function(){const n=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.deleteList(n.id))}),t.nrm(12,"i",19),t.EFF(13,"Remove "),t.k0s()()()}if(2&i){const e=s.$implicit;t.R7$(2),t.Y8G("src",null==e||null==e.variantWithWishList||null==e.variantWithWishList.variantImages[0]?null:e.variantWithWishList.variantImages[0].image,t.B4B),t.R7$(2),t.SpI(" ",null==e||null==e.variantWithWishList||null==e.variantWithWishList.variantWithProduct?null:e.variantWithWishList.variantWithProduct.name," "),t.R7$(2),t.SpI(" ",t.i5U(7,3,null==e||null==e.variantWithWishList?null:e.variantWithWishList.price,"CAD")," ")}}function vt(i,s){if(1&i&&(t.j41(0,"div",10)(1,"div",3),t.DNE(2,ft,14,6,"div",11),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.wishlist)}}function _t(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",10)(1,"h2",20),t.EFF(2,"No Products is added in Wishlist!"),t.k0s(),t.j41(3,"div",3)(4,"div",21)(5,"button",22),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.navigateTo("/home"))}),t.EFF(6,"Continue Shopping"),t.k0s()()()()}}let bt=(()=>{class i{constructor(e,r,n,o,a){this.wishlistService=e,this.cartService=r,this.storageService=n,this.toasterService=o,this.router=a,this.wishlist=[],this.user=this.storageService.get("Customer")}ngOnInit(){this.getAllWishlist()}getAllWishlist(){this.wishlistService.getAll().subscribe({next:e=>{this.wishlist=e.result.rows},error:e=>{console.log("err",e)}})}navigateTo(e){this.router.navigate([e])}navigateToProdDetails(e){this.router.navigate([`/product/product-details/${e}`])}createCart(e){try{if(!this.user)return void this.toasterService.warning("Please login to add cart");console.log("added to cart"),this.cartService.create({qty:1,variantId:e,customerId:this.user.id}).subscribe(n=>{this.toasterService.success("Product added to cart!!")})}catch(r){console.log("error",r)}}deleteList(e){try{if(!this.user)return void this.toasterService.warning("Please login to add cart");this.wishlistService.delete(e).subscribe(r=>{this.getAllWishlist(),this.toasterService.success("Product removed from wishlist!!")})}catch(r){console.log("error",r)}}static#t=this.\u0275fac=function(r){return new(r||i)(t.rXU(gt.F),t.rXU(C.m),t.rXU(h.n$),t.rXU(y.tw),t.rXU(u.Ix))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-wishlist"]],decls:15,vars:2,consts:[[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-11"],[1,"row"],[1,"col-12"],[1,"row","w-100","justify-content-between"],[1,"col-12","col-lg-11"],[1,"py-3","text-color-primary","pointer"],[3,"click"],["class","col-12 p-3 border-bottom",4,"ngIf"],[1,"col-12","p-3","border-bottom"],["class","col-12 col-sm-6 col-md-4 col-lg-3 d-flex flex-wrap p-2",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","d-flex","flex-wrap","p-2"],[1,"d-flex","flex-column","align-items-center","py-3","w-100"],["height","250","alt","",1,"w-100",3,"click","src"],[1,"mb-0"],[1,"btn","btn-dark","p-2","w-50",3,"click"],[1,"fa-solid","fa-bag-shopping","me-2"],[1,"btn","btn-dark","mt-1","p-2","w-50",3,"click"],[1,"fa-solid","fa-trash","me-2"],[1,"mb-4"],[1,"col-9","col-md-4","col-lg-4"],[1,"btn","btn-dark","p-2",3,"click"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"p",7)(8,"span",8),t.bIt("click",function(){return n.navigateTo("/")}),t.EFF(9,"Home"),t.k0s(),t.EFF(10," / "),t.j41(11,"span"),t.EFF(12,"Wishlist"),t.k0s()()()(),t.DNE(13,vt,3,1,"div",9)(14,_t,7,0,"div",9),t.k0s()()()()()),2&r&&(t.R7$(13),t.Y8G("ngIf",n.wishlist.length),t.R7$(),t.Y8G("ngIf",!n.wishlist.length))},dependencies:[c.Sq,c.bT,c.oe]})}return i})();var Ct=l(6554);const yt=[{path:"cart",component:$},{path:"checkout",component:st},{path:"my-orders",component:mt},{path:"wishlist",component:bt}];let kt=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[c.MD,p.YN,p.X1,Ct.PO,u.iI.forChild(yt)]})}return i})()}}]);